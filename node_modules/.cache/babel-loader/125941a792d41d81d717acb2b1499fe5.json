{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import NavBar from\"./NavBar\";import{Row}from'reactstrap';import Leftcomponent from\"./Leftcomponent\";import Footer from\"./Footer\";import Rightcomponent from\"./Rightcomponent\";import base,{firebaseApp}from\"./base\";import firebase,{auth}from\"firebase\";import Authanticate from\"./Authanticate\";import{c,cpp}from\"../data\";import Exicute from\"../Api/Exicute\";import Axios from\"axios\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={editor:{},isopen:false,savefiles:{},mode:\"none\",dropdownvalue:\"\",issaved:false,filename:\"\",status:\"\",id:null,recent:{},val:{},length:-9999999999,uid:null,owner:null,signup:false,fontsize:14,tabsize:4,theme:\"blackboard\",oldvalue:null};_this.setoldvalue=function(val){_this.setState({oldvalue:val});};_this.previoussetting=function(){var res=localStorage.getItem(\"CodeBix\");var val=JSON.parse(res);if(val&&val.mode&&val.fontsize){_this.state.editor.getWrapperElement().style[\"font-size\"]=parseInt(val.fontsize)+\"px\";_this.state.editor.refresh();switch(val.mode){case\"C++\":_this.state.editor.setOption(\"mode\",\"text/x-c++src\");_this.state.editor.setValue(cpp);_this.setlength(_this.state.editor.getValue().length);break;case\"C\":_this.state.editor.setOption(\"mode\",\"text/x-csrc\");_this.state.editor.setValue(c);_this.setlength(_this.state.editor.getValue().length);break;default:break;}_this.setoldvalue(val.mode);_this.state.editor.setOption(\"indentUnit\",parseInt(val.tabsize));_this.state.editor.setOption(\"theme\",val.theme);}};_this.setsignup=function(){_this.setState({signup:!_this.state.signup});};_this.savedlastfile=function(){var len=Object.keys(_this.state.recent).length;if(len<5){var id=null;var data={};if(!_this.state.issaved){var file={name:\"Unknown\",content:_this.state.editor.getValue(),mode:_this.state.dropdownvalue,status:\"Unsaved\"};id=Date.now();data=file;}else{id=_this.state.id;data=_this.state.savefiles[_this.state.id];}var recent=_objectSpread({},_this.state.recent);recent[id]=data;var final={mode:\"\",fontsize:\"\",recent:recent};localStorage.setItem(\"CodeBix\",JSON.stringify(final));_this.setState({recent:recent});}else{var index=Object.keys(_this.state.recent)[0];var _recent=_objectSpread({},_this.state.recent);delete _recent[index];var _id=null;var _data={};if(!_this.state.issaved){var _file={name:\"Unknown\",content:_this.state.editor.getValue(),mode:_this.state.dropdownvalue,status:\"Unsaved\"};_id=Date.now();_data=_file;}else{_id=_this.state.id;_data=_this.state.savefiles[_this.state.id];}_recent[_id]=_data;var _final={mode:\"\",fontsize:\"\",recent:_recent};localStorage.setItem(\"CodeBix\",JSON.stringify(_final));_this.setState({recent:_recent});}};_this.updaterecent=function(){var len=Object.keys(_this.state.recent).length;if(len<5){var id=null;var data={};if(!_this.state.issaved){var file={name:\"Unknown\",content:_this.state.editor.getValue(),mode:_this.state.dropdownvalue,status:\"Unsaved\"};id=Date.now();data=file;}else{id=_this.state.id;data=_this.state.savefiles[_this.state.id];}var recent=_objectSpread({},_this.state.recent);recent[id]=data;_this.setState({recent:recent});}else{var index=Object.keys(_this.state.recent)[0];var _recent2=_objectSpread({},_this.state.recent);delete _recent2[index];var _id2=null;var _data2={};if(!_this.state.issaved){var _file2={name:\"Unknown\",content:_this.state.editor.getValue(),mode:_this.state.dropdownvalue,status:\"Unsaved\"};_id2=Date.now();_data2=_file2;}else{_id2=_this.state.id;_data2=_this.state.savefiles[_this.state.id];}_recent2[_id2]=_data2;_this.setState({recent:_recent2});}};_this.setid=function(val){_this.setState({id:val});};_this.setdropdown=function(val){_this.setState({dropdownvalue:val});};_this.setsaved=function(){_this.setState({issaved:!_this.state.issaved});};_this.updateeditor=function(id){if(id&&_this.state.savefiles[id]){var data=_this.state.savefiles[id];_this.setid(id);_this.setsaved();_this.setdropdown(data.mode);_this.state.editor.setValue(data.content);switch(data.mode){case\"C++\":_this.state.editor.setOption(\"mode\",\"text/x-c++src\");break;case\"C\":_this.state.editor.setOption(\"mode\",\"text/x-csrc\");break;}_this.setState({length:_this.state.editor.getValue().length});_this.state.editor.on('change',function(cm){if(_this.state.dropdownvalue===data.mode){data.content=cm.getValue();_this.updatevalue(id,data);}});}};_this.updatevalue=function(key,val){var savefiles=_objectSpread({},_this.state.savefiles);savefiles[key]=val;_this.setState({savefiles:savefiles});};_this.setmode=function(val){_this.setState({mode:val});};_this.savefile=function(val){_this.setState({issaved:true});_this.setstatus(\"Saving...\");var data={name:val,content:_this.state.editor.getValue(),status:\"saved\",mode:_this.state.mode};var savefiles=_objectSpread({},_this.state.savefiles);var id=Date.now();_this.setid(id);savefiles[id]=data;_this.setState({savefiles:savefiles});setTimeout(function(){_this.setstatus(data.name);_this.updaterecent();},1000);_this.state.editor.on('change',function(cm){if(_this.state.dropdownvalue===data.mode){_this.setstatus(\"Saving...\");data.content=cm.getValue();_this.updatevalue(id,data);setTimeout(function(){_this.setstatus(data.name);},1000);}});};_this.seteditor=function(val){_this.setState({editor:val});};_this.settheme=function(val){_this.setState({theme:val});_this.state.editor.setOption(\"theme\",val);};_this.settab=function(val){_this.setState({tabsize:val});_this.state.editor.setOption(\"indentUnit\",val);};_this.setsize=function(val){_this.setState({fontsize:val});_this.state.editor.getWrapperElement().style[\"font-size\"]=val+\"px\";_this.state.editor.refresh();};_this.toggle=function(){_this.setState({isopen:!_this.state.isopen});};_this.setstatus=function(val){// console.log(val);\n_this.setState({status:val});};_this.setlength=function(len){_this.setState({length:len});};_this.authenticate=function(provider){var authprovider=new firebase.auth[\"\".concat(provider,\"AuthProvider\")]();firebase.auth().signInWithPopup(authprovider).then(_this.authHandler);_this.setsignup();};_this.authHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(authdata){var store;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return base.fetch(authdata.user.uid,{context:_assertThisInitialized(_this)});case 2:store=_context.sent;if(store.user){_context.next=6;break;}_context.next=6;return base.post(\"\".concat(authdata.user.uid,\"/user\"),{data:authdata.user.uid});case 6://set the state of the inventory compnent.\n_this.setState({uid:authdata.user.uid,owner:store.user||authdata.user.uid});_this.ref=base.syncState(\"\".concat(authdata.user.uid,\"/savefiles\"),{context:_assertThisInitialized(_this),state:'savefiles'});case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.logout=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return firebase.auth().signOut();case 2:_this.setState({uid:null});case 3:case\"end\":return _context2.stop();}}},_callee2);}));_this.editrecent=function(val,ind){_this.setState({issaved:false});if(val.status===\"saved\"){_this.setsaved();_this.setstatus(val.name);}_this.setid(ind);_this.setdropdown(val.mode);_this.setmode(val.mode);switch(val.mode){case\"C++\":_this.state.editor.setOption(\"mode\",\"text/x-c++src\");break;case\"C\":_this.state.editor.setOption(\"mode\",\"text/x-csrc\");break;}_this.setState({filename:val.name});_this.state.editor.setValue(val.content);_this.state.editor.on('change',function(cm){if(_this.state.dropdownvalue===val.mode&&val.status===\"saved\"){val.content=cm.getValue();_this.updatevalue(val,ind);}});};_this.Exicutecode=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var lang,val,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:lang=\"\";_context3.t0=_this.state.mode;_context3.next=_context3.t0===\"C++\"?4:_context3.t0===\"C\"?6:8;break;case 4:lang=\"CPP\";return _context3.abrupt(\"break\",10);case 6:lang=\"C\";return _context3.abrupt(\"break\",10);case 8:lang=\" \";return _context3.abrupt(\"break\",10);case 10:val=_this.state.editor.getValue();_context3.next=13;return Exicute.post(\"compile\",{params:{client_secret:\"5974f281c1b781f2aeb1b7730e53ea82c6b21d50\",async:0,source:val,lang:lang,time_limit:5,memory_limit:262144}});case 13:response=_context3.sent;console.log(response);case 15:case\"end\":return _context3.stop();}}},_callee3);}));return _this;}_createClass(App,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;firebase.auth().onAuthStateChanged(function(user){if(user){_this2.authHandler({user:user});}});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;var res=localStorage.getItem(\"CodeBix\");if(res){var val=JSON.parse(res);this.setState({val:val});this.setState({recent:val.recent});this.setState({fontsize:parseInt(val.fontsize)});this.setmode(val.mode);this.setdropdown(val.mode);this.setState({tabsize:parseInt(val.tabsize)});this.setState({theme:val.theme});}var id=this.props.match.params.id;if(id){setTimeout(function(){_this3.updateeditor(id);},3400);}else{setTimeout(function(){_this3.previoussetting();},500);}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(this.state.length>0&&this.state.length<this.state.editor.getValue().length){this.savedlastfile();}base.removeBinding(this.ref);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var final={mode:this.state.dropdownvalue||\"\",fontsize:this.state.fontsize||\"\",tabsize:this.state.tabsize||\"\",theme:this.state.theme||\"\",recent:this.state.recent};localStorage.setItem(\"CodeBix\",JSON.stringify(final));}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\",style:{paddingLeft:\"0px\",paddingRight:\"0px\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"main-wrapper\"},/*#__PURE__*/React.createElement(NavBar,{logout:this.logout,setsignup:this.setsignup,uid:this.state.uid,owner:this.state.owner,settheme:this.settheme,settab:this.settab,setsize:this.setsize,isopen:this.state.isopen,savefile:this.savefile,toggle:this.toggle}),/*#__PURE__*/React.createElement(Authanticate,{signup:this.state.signup,setsignup:this.setsignup,authenticate:this.authenticate}),/*#__PURE__*/React.createElement(\"div\",{className:\"gap\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"\",style:{marginLeft:\"20px\",marginRight:\"20px\"}},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Leftcomponent,{Exicutecode:this.Exicutecode,setoldvalue:this.setoldvalue,oldvalue:this.state.oldvalue,setlength:this.setlength,length:this.state.length,setsaved:this.setsaved,editor:this.state.editor,seteditor:this.seteditor,toggle:this.toggle,setmode:this.setmode,setdropdown:this.setdropdown,dropdownvalue:this.state.dropdownvalue,issaved:this.state.issaved,status:this.state.status,setstatus:this.setstatus,path:this.props.match.url,id:this.state.id,updaterecent:this.updaterecent}),/*#__PURE__*/React.createElement(Rightcomponent,{recent:this.state.recent,editrecent:this.editrecent}))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Footer,null)));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["E:/Internship Project/codebix/src/components/App.js"],"names":["React","NavBar","Row","Leftcomponent","Footer","Rightcomponent","base","firebaseApp","firebase","auth","Authanticate","c","cpp","Exicute","Axios","App","state","editor","isopen","savefiles","mode","dropdownvalue","issaved","filename","status","id","recent","val","length","uid","owner","signup","fontsize","tabsize","theme","oldvalue","setoldvalue","setState","previoussetting","res","localStorage","getItem","JSON","parse","getWrapperElement","style","parseInt","refresh","setOption","setValue","setlength","getValue","setsignup","savedlastfile","len","Object","keys","data","file","name","content","Date","now","final","setItem","stringify","index","updaterecent","setid","setdropdown","setsaved","updateeditor","on","cm","updatevalue","key","setmode","savefile","setstatus","setTimeout","seteditor","settheme","settab","setsize","toggle","authenticate","provider","authprovider","signInWithPopup","then","authHandler","authdata","fetch","user","context","store","post","ref","syncState","logout","signOut","editrecent","ind","Exicutecode","lang","params","client_secret","async","source","time_limit","memory_limit","response","console","log","onAuthStateChanged","props","match","removeBinding","paddingLeft","paddingRight","marginLeft","marginRight","url","Component"],"mappings":"otCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAAQC,GAAR,KAAkB,YAAlB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,IAAP,EAAcC,WAAd,KAAgC,QAAhC,CACA,MAAOC,CAAAA,QAAP,EAAkBC,IAAlB,KAA6B,UAA7B,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,OAASC,CAAT,CAAYC,GAAZ,KAAuB,SAAvB,CACA,MAAOC,CAAAA,OAAP,KAAoB,gBAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,GACMC,CAAAA,G,2TACFC,K,CAAM,CACFC,MAAM,CAAC,EADL,CAEFC,MAAM,CAAC,KAFL,CAGFC,SAAS,CAAC,EAHR,CAIFC,IAAI,CAAC,MAJH,CAKFC,aAAa,CAAC,EALZ,CAMFC,OAAO,CAAC,KANN,CAOFC,QAAQ,CAAC,EAPP,CAQFC,MAAM,CAAC,EARL,CASFC,EAAE,CAAC,IATD,CAUFC,MAAM,CAAC,EAVL,CAWFC,GAAG,CAAC,EAXF,CAYFC,MAAM,CAAC,CAAC,UAZN,CAaFC,GAAG,CAAC,IAbF,CAcFC,KAAK,CAAC,IAdJ,CAeFC,MAAM,CAAC,KAfL,CAgBFC,QAAQ,CAAC,EAhBP,CAiBFC,OAAO,CAAC,CAjBN,CAkBFC,KAAK,CAAC,YAlBJ,CAmBFC,QAAQ,CAAC,IAnBP,C,OA0ENC,W,CAAY,SAACT,GAAD,CAAO,CACf,MAAKU,QAAL,CAAc,CAACF,QAAQ,CAACR,GAAV,CAAd,EACH,C,OACDW,e,CAAgB,UAAI,CAChB,GAAMC,CAAAA,GAAG,CAACC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAV,CACA,GAAId,CAAAA,GAAG,CAAGe,IAAI,CAACC,KAAL,CAAWJ,GAAX,CAAV,CACA,GAAGZ,GAAG,EAAIA,GAAG,CAACP,IAAX,EAAmBO,GAAG,CAACK,QAA1B,CAAmC,CAC/B,MAAKhB,KAAL,CAAWC,MAAX,CAAkB2B,iBAAlB,GAAsCC,KAAtC,CAA4C,WAA5C,EAAyDC,QAAQ,CAACnB,GAAG,CAACK,QAAL,CAAR,CAAuB,IAAhF,CACA,MAAKhB,KAAL,CAAWC,MAAX,CAAkB8B,OAAlB,GACA,OAAQpB,GAAG,CAACP,IAAZ,EACI,IAAK,KAAL,CACI,MAAKJ,KAAL,CAAWC,MAAX,CAAkB+B,SAAlB,CAA4B,MAA5B,CAAmC,eAAnC,EACA,MAAKhC,KAAL,CAAWC,MAAX,CAAkBgC,QAAlB,CAA2BrC,GAA3B,EACA,MAAKsC,SAAL,CAAe,MAAKlC,KAAL,CAAWC,MAAX,CAAkBkC,QAAlB,GAA6BvB,MAA5C,EACA,MACJ,IAAK,GAAL,CACI,MAAKZ,KAAL,CAAWC,MAAX,CAAkB+B,SAAlB,CAA4B,MAA5B,CAAmC,aAAnC,EACA,MAAKhC,KAAL,CAAWC,MAAX,CAAkBgC,QAAlB,CAA2BtC,CAA3B,EACA,MAAKuC,SAAL,CAAe,MAAKlC,KAAL,CAAWC,MAAX,CAAkBkC,QAAlB,GAA6BvB,MAA5C,EACA,MACJ,QACI,MAZR,CAcA,MAAKQ,WAAL,CAAiBT,GAAG,CAACP,IAArB,EACA,MAAKJ,KAAL,CAAWC,MAAX,CAAkB+B,SAAlB,CAA4B,YAA5B,CAAyCF,QAAQ,CAACnB,GAAG,CAACM,OAAL,CAAjD,EACA,MAAKjB,KAAL,CAAWC,MAAX,CAAkB+B,SAAlB,CAA4B,OAA5B,CAAoCrB,GAAG,CAACO,KAAxC,EAEH,CACJ,C,OAEDkB,S,CAAU,UAAI,CACV,MAAKf,QAAL,CAAc,CAACN,MAAM,CAAC,CAAC,MAAKf,KAAL,CAAWe,MAApB,CAAd,EACH,C,OAEDsB,a,CAAc,UAAI,CACd,GAAMC,CAAAA,GAAG,CAAEC,MAAM,CAACC,IAAP,CAAY,MAAKxC,KAAL,CAAWU,MAAvB,EAA+BE,MAA1C,CACA,GAAG0B,GAAG,CAAC,CAAP,CAAS,CACL,GAAI7B,CAAAA,EAAE,CAAE,IAAR,CACA,GAAIgC,CAAAA,IAAI,CAAC,EAAT,CACA,GAAG,CAAC,MAAKzC,KAAL,CAAWM,OAAf,CAAuB,CACpB,GAAMoC,CAAAA,IAAI,CAAC,CACPC,IAAI,CAAC,SADE,CAEPC,OAAO,CAAC,MAAK5C,KAAL,CAAWC,MAAX,CAAkBkC,QAAlB,EAFD,CAGP/B,IAAI,CAAC,MAAKJ,KAAL,CAAWK,aAHT,CAIPG,MAAM,CAAC,SAJA,CAAX,CAMAC,EAAE,CAACoC,IAAI,CAACC,GAAL,EAAH,CACAL,IAAI,CAACC,IAAL,CACF,CATD,IAUI,CACAjC,EAAE,CAAC,MAAKT,KAAL,CAAWS,EAAd,CACDgC,IAAI,CAAC,MAAKzC,KAAL,CAAWG,SAAX,CAAqB,MAAKH,KAAL,CAAWS,EAAhC,CAAL,CACF,CACD,GAAIC,CAAAA,MAAM,kBAAK,MAAKV,KAAL,CAAWU,MAAhB,CAAV,CACAA,MAAM,CAACD,EAAD,CAAN,CAAWgC,IAAX,CACA,GAAMM,CAAAA,KAAK,CAAC,CACR3C,IAAI,CAAC,EADG,CAERY,QAAQ,CAAC,EAFD,CAGRN,MAAM,CAACA,MAHC,CAAZ,CAKAc,YAAY,CAACwB,OAAb,CAAqB,SAArB,CAA+BtB,IAAI,CAACuB,SAAL,CAAeF,KAAf,CAA/B,EACA,MAAK1B,QAAL,CAAc,CAACX,MAAM,CAANA,MAAD,CAAd,EAEH,CA3BD,IA4BI,CACD,GAAMwC,CAAAA,KAAK,CAAEX,MAAM,CAACC,IAAP,CAAY,MAAKxC,KAAL,CAAWU,MAAvB,EAA+B,CAA/B,CAAb,CACA,GAAIA,CAAAA,OAAM,kBAAK,MAAKV,KAAL,CAAWU,MAAhB,CAAV,CACA,MAAOA,CAAAA,OAAM,CAACwC,KAAD,CAAb,CACA,GAAIzC,CAAAA,GAAE,CAAE,IAAR,CACC,GAAIgC,CAAAA,KAAI,CAAC,EAAT,CACA,GAAG,CAAC,MAAKzC,KAAL,CAAWM,OAAf,CAAuB,CACpB,GAAMoC,CAAAA,KAAI,CAAC,CACPC,IAAI,CAAC,SADE,CAEPC,OAAO,CAAC,MAAK5C,KAAL,CAAWC,MAAX,CAAkBkC,QAAlB,EAFD,CAGP/B,IAAI,CAAC,MAAKJ,KAAL,CAAWK,aAHT,CAIPG,MAAM,CAAC,SAJA,CAAX,CAMAC,GAAE,CAACoC,IAAI,CAACC,GAAL,EAAH,CACAL,KAAI,CAACC,KAAL,CACF,CATD,IAUI,CACAjC,GAAE,CAAC,MAAKT,KAAL,CAAWS,EAAd,CACDgC,KAAI,CAAC,MAAKzC,KAAL,CAAWG,SAAX,CAAqB,MAAKH,KAAL,CAAWS,EAAhC,CAAL,CACF,CACDC,OAAM,CAACD,GAAD,CAAN,CAAWgC,KAAX,CACA,GAAMM,CAAAA,MAAK,CAAC,CACR3C,IAAI,CAAC,EADG,CAERY,QAAQ,CAAC,EAFD,CAGRN,MAAM,CAACA,OAHC,CAAZ,CAKAc,YAAY,CAACwB,OAAb,CAAqB,SAArB,CAA+BtB,IAAI,CAACuB,SAAL,CAAeF,MAAf,CAA/B,EACA,MAAK1B,QAAL,CAAc,CAACX,MAAM,CAACA,OAAR,CAAd,EAEH,CACJ,C,OAEDyC,Y,CAAa,UAAI,CACb,GAAMb,CAAAA,GAAG,CAAEC,MAAM,CAACC,IAAP,CAAY,MAAKxC,KAAL,CAAWU,MAAvB,EAA+BE,MAA1C,CACA,GAAG0B,GAAG,CAAC,CAAP,CAAS,CACL,GAAI7B,CAAAA,EAAE,CAAE,IAAR,CACA,GAAIgC,CAAAA,IAAI,CAAC,EAAT,CACA,GAAG,CAAC,MAAKzC,KAAL,CAAWM,OAAf,CAAuB,CACpB,GAAMoC,CAAAA,IAAI,CAAC,CACPC,IAAI,CAAC,SADE,CAEPC,OAAO,CAAC,MAAK5C,KAAL,CAAWC,MAAX,CAAkBkC,QAAlB,EAFD,CAGP/B,IAAI,CAAC,MAAKJ,KAAL,CAAWK,aAHT,CAIPG,MAAM,CAAC,SAJA,CAAX,CAMAC,EAAE,CAACoC,IAAI,CAACC,GAAL,EAAH,CACAL,IAAI,CAACC,IAAL,CACF,CATD,IAUI,CACAjC,EAAE,CAAC,MAAKT,KAAL,CAAWS,EAAd,CACDgC,IAAI,CAAC,MAAKzC,KAAL,CAAWG,SAAX,CAAqB,MAAKH,KAAL,CAAWS,EAAhC,CAAL,CACF,CACD,GAAIC,CAAAA,MAAM,kBAAK,MAAKV,KAAL,CAAWU,MAAhB,CAAV,CACAA,MAAM,CAACD,EAAD,CAAN,CAAWgC,IAAX,CACA,MAAKpB,QAAL,CAAc,CAACX,MAAM,CAANA,MAAD,CAAd,EAEH,CArBD,IAsBI,CACD,GAAMwC,CAAAA,KAAK,CAAEX,MAAM,CAACC,IAAP,CAAY,MAAKxC,KAAL,CAAWU,MAAvB,EAA+B,CAA/B,CAAb,CACA,GAAIA,CAAAA,QAAM,kBAAK,MAAKV,KAAL,CAAWU,MAAhB,CAAV,CACA,MAAOA,CAAAA,QAAM,CAACwC,KAAD,CAAb,CACA,GAAIzC,CAAAA,IAAE,CAAE,IAAR,CACC,GAAIgC,CAAAA,MAAI,CAAC,EAAT,CACA,GAAG,CAAC,MAAKzC,KAAL,CAAWM,OAAf,CAAuB,CACpB,GAAMoC,CAAAA,MAAI,CAAC,CACPC,IAAI,CAAC,SADE,CAEPC,OAAO,CAAC,MAAK5C,KAAL,CAAWC,MAAX,CAAkBkC,QAAlB,EAFD,CAGP/B,IAAI,CAAC,MAAKJ,KAAL,CAAWK,aAHT,CAIPG,MAAM,CAAC,SAJA,CAAX,CAMAC,IAAE,CAACoC,IAAI,CAACC,GAAL,EAAH,CACAL,MAAI,CAACC,MAAL,CACF,CATD,IAUI,CACAjC,IAAE,CAAC,MAAKT,KAAL,CAAWS,EAAd,CACDgC,MAAI,CAAC,MAAKzC,KAAL,CAAWG,SAAX,CAAqB,MAAKH,KAAL,CAAWS,EAAhC,CAAL,CACF,CACDC,QAAM,CAACD,IAAD,CAAN,CAAWgC,MAAX,CACA,MAAKpB,QAAL,CAAc,CAACX,MAAM,CAACA,QAAR,CAAd,EACH,CAEJ,C,OAED0C,K,CAAM,SAACzC,GAAD,CAAO,CACT,MAAKU,QAAL,CAAc,CAACZ,EAAE,CAACE,GAAJ,CAAd,EACH,C,OACD0C,W,CAAY,SAAC1C,GAAD,CAAO,CACf,MAAKU,QAAL,CAAc,CAAChB,aAAa,CAACM,GAAf,CAAd,EACH,C,OACD2C,Q,CAAS,UAAI,CACT,MAAKjC,QAAL,CAAc,CAACf,OAAO,CAAC,CAAC,MAAKN,KAAL,CAAWM,OAArB,CAAd,EACH,C,OAEDiD,Y,CAAa,SAAC9C,EAAD,CAAM,CACf,GAAGA,EAAE,EAAI,MAAKT,KAAL,CAAWG,SAAX,CAAqBM,EAArB,CAAT,CAAkC,CAC9B,GAAMgC,CAAAA,IAAI,CAAG,MAAKzC,KAAL,CAAWG,SAAX,CAAqBM,EAArB,CAAb,CACA,MAAK2C,KAAL,CAAW3C,EAAX,EACA,MAAK6C,QAAL,GACA,MAAKD,WAAL,CAAiBZ,IAAI,CAACrC,IAAtB,EACA,MAAKJ,KAAL,CAAWC,MAAX,CAAkBgC,QAAlB,CAA2BQ,IAAI,CAACG,OAAhC,EACA,OAAQH,IAAI,CAACrC,IAAb,EACI,IAAK,KAAL,CACI,MAAKJ,KAAL,CAAWC,MAAX,CAAkB+B,SAAlB,CAA4B,MAA5B,CAAmC,eAAnC,EACA,MACJ,IAAK,GAAL,CACI,MAAKhC,KAAL,CAAWC,MAAX,CAAkB+B,SAAlB,CAA4B,MAA5B,CAAmC,aAAnC,EACA,MANR,CAQA,MAAKX,QAAL,CAAc,CAACT,MAAM,CAAC,MAAKZ,KAAL,CAAWC,MAAX,CAAkBkC,QAAlB,GAA6BvB,MAArC,CAAd,EACA,MAAKZ,KAAL,CAAWC,MAAX,CAAkBuD,EAAlB,CAAqB,QAArB,CAA8B,SAACC,EAAD,CAAM,CAChC,GAAG,MAAKzD,KAAL,CAAWK,aAAX,GAA2BoC,IAAI,CAACrC,IAAnC,CAAwC,CACpCqC,IAAI,CAACG,OAAL,CAAaa,EAAE,CAACtB,QAAH,EAAb,CACA,MAAKuB,WAAL,CAAiBjD,EAAjB,CAAoBgC,IAApB,EAEH,CACJ,CAND,EAQH,CACJ,C,OAEDiB,W,CAAY,SAACC,GAAD,CAAKhD,GAAL,CAAW,CACnB,GAAMR,CAAAA,SAAS,kBAAK,MAAKH,KAAL,CAAWG,SAAhB,CAAf,CACAA,SAAS,CAACwD,GAAD,CAAT,CAAehD,GAAf,CACA,MAAKU,QAAL,CAAc,CAAClB,SAAS,CAACA,SAAX,CAAd,EACH,C,OAEDyD,O,CAAQ,SAACjD,GAAD,CAAO,CACX,MAAKU,QAAL,CAAc,CAACjB,IAAI,CAACO,GAAN,CAAd,EACH,C,OACDkD,Q,CAAS,SAAClD,GAAD,CAAO,CACZ,MAAKU,QAAL,CAAc,CAACf,OAAO,CAAC,IAAT,CAAd,EACA,MAAKwD,SAAL,CAAe,WAAf,EACA,GAAMrB,CAAAA,IAAI,CAAC,CACPE,IAAI,CAAChC,GADE,CAEPiC,OAAO,CAAC,MAAK5C,KAAL,CAAWC,MAAX,CAAkBkC,QAAlB,EAFD,CAGP3B,MAAM,CAAC,OAHA,CAIPJ,IAAI,CAAC,MAAKJ,KAAL,CAAWI,IAJT,CAAX,CAMA,GAAMD,CAAAA,SAAS,kBAAM,MAAKH,KAAL,CAAWG,SAAjB,CAAf,CACA,GAAMM,CAAAA,EAAE,CAAEoC,IAAI,CAACC,GAAL,EAAV,CACA,MAAKM,KAAL,CAAW3C,EAAX,EACAN,SAAS,CAACM,EAAD,CAAT,CAAcgC,IAAd,CACA,MAAKpB,QAAL,CAAc,CAAClB,SAAS,CAACA,SAAX,CAAd,EACA4D,UAAU,CAAC,UAAM,CACb,MAAKD,SAAL,CAAerB,IAAI,CAACE,IAApB,EACA,MAAKQ,YAAL,GACH,CAHS,CAGP,IAHO,CAAV,CAKA,MAAKnD,KAAL,CAAWC,MAAX,CAAkBuD,EAAlB,CAAqB,QAArB,CAA8B,SAACC,EAAD,CAAM,CAChC,GAAG,MAAKzD,KAAL,CAAWK,aAAX,GAA2BoC,IAAI,CAACrC,IAAnC,CAAwC,CACpC,MAAK0D,SAAL,CAAe,WAAf,EACArB,IAAI,CAACG,OAAL,CAAaa,EAAE,CAACtB,QAAH,EAAb,CACA,MAAKuB,WAAL,CAAiBjD,EAAjB,CAAoBgC,IAApB,EACAsB,UAAU,CAAC,UAAM,CACb,MAAKD,SAAL,CAAerB,IAAI,CAACE,IAApB,EACH,CAFS,CAEP,IAFO,CAAV,CAIH,CACJ,CAVD,EAWH,C,OACDqB,S,CAAU,SAACrD,GAAD,CAAO,CACb,MAAKU,QAAL,CAAc,CAACpB,MAAM,CAACU,GAAR,CAAd,EACH,C,OACDsD,Q,CAAS,SAACtD,GAAD,CAAO,CACZ,MAAKU,QAAL,CAAc,CAACH,KAAK,CAACP,GAAP,CAAd,EACA,MAAKX,KAAL,CAAWC,MAAX,CAAkB+B,SAAlB,CAA4B,OAA5B,CAAoCrB,GAApC,EACH,C,OACDuD,M,CAAO,SAACvD,GAAD,CAAO,CACV,MAAKU,QAAL,CAAc,CAACJ,OAAO,CAACN,GAAT,CAAd,EACA,MAAKX,KAAL,CAAWC,MAAX,CAAkB+B,SAAlB,CAA4B,YAA5B,CAAyCrB,GAAzC,EACH,C,OACDwD,O,CAAQ,SAACxD,GAAD,CAAO,CACX,MAAKU,QAAL,CAAc,CAACL,QAAQ,CAACL,GAAV,CAAd,EACA,MAAKX,KAAL,CAAWC,MAAX,CAAkB2B,iBAAlB,GAAsCC,KAAtC,CAA4C,WAA5C,EAA0DlB,GAAG,CAAC,IAA9D,CACA,MAAKX,KAAL,CAAWC,MAAX,CAAkB8B,OAAlB,GACH,C,OACDqC,M,CAAO,UAAI,CACP,MAAK/C,QAAL,CAAc,CAACnB,MAAM,CAAC,CAAC,MAAKF,KAAL,CAAWE,MAApB,CAAd,EACH,C,OACD4D,S,CAAU,SAACnD,GAAD,CAAO,CACb;AACA,MAAKU,QAAL,CAAc,CAACb,MAAM,CAACG,GAAR,CAAd,EACH,C,OAEDuB,S,CAAU,SAACI,GAAD,CAAO,CACb,MAAKjB,QAAL,CAAc,CAACT,MAAM,CAAC0B,GAAR,CAAd,EACH,C,OAED+B,Y,CAAa,SAACC,QAAD,CAAY,CACrB,GAAMC,CAAAA,YAAY,CAAE,GAAI/E,CAAAA,QAAQ,CAACC,IAAT,WAAiB6E,QAAjB,iBAAJ,EAApB,CACA9E,QAAQ,CAACC,IAAT,GAAgB+E,eAAhB,CAAgCD,YAAhC,EAA8CE,IAA9C,CAAmD,MAAKC,WAAxD,EACA,MAAKtC,SAAL,GAEH,C,OAEDsC,W,0FAAa,iBAAOC,QAAP,kJAEWrF,CAAAA,IAAI,CAACsF,KAAL,CAAWD,QAAQ,CAACE,IAAT,CAAchE,GAAzB,CAA6B,CAACiE,OAAO,8BAAR,CAA7B,CAFX,QAEHC,KAFG,kBAILA,KAAK,CAACF,IAJD,+CAKCvF,CAAAA,IAAI,CAAC0F,IAAL,WAAaL,QAAQ,CAACE,IAAT,CAAchE,GAA3B,UAAsC,CACxC4B,IAAI,CAACkC,QAAQ,CAACE,IAAT,CAAchE,GADqB,CAAtC,CALD,QAST;AACA,MAAKQ,QAAL,CAAc,CACVR,GAAG,CAAC8D,QAAQ,CAACE,IAAT,CAAchE,GADR,CAEVC,KAAK,CAACiE,KAAK,CAACF,IAAN,EAAcF,QAAQ,CAACE,IAAT,CAAchE,GAFxB,CAAd,EAIA,MAAKoE,GAAL,CAAU3F,IAAI,CAAC4F,SAAL,WAAkBP,QAAQ,CAACE,IAAT,CAAchE,GAAhC,eAAgD,CACtDiE,OAAO,8BAD+C,CAEtD9E,KAAK,CAAC,WAFgD,CAAhD,CAAV,CAdS,sD,qEAoBbmF,M,sEAAS,+JACC3F,CAAAA,QAAQ,CAACC,IAAT,GAAgB2F,OAAhB,EADD,QAEL,MAAK/D,QAAL,CAAc,CACVR,GAAG,CAAC,IADM,CAAd,EAFK,wD,SAOTwE,U,CAAW,SAAC1E,GAAD,CAAK2E,GAAL,CAAW,CAClB,MAAKjE,QAAL,CAAc,CAACf,OAAO,CAAC,KAAT,CAAd,EACA,GAAGK,GAAG,CAACH,MAAJ,GAAa,OAAhB,CAAwB,CACpB,MAAK8C,QAAL,GACA,MAAKQ,SAAL,CAAenD,GAAG,CAACgC,IAAnB,EACH,CAED,MAAKS,KAAL,CAAWkC,GAAX,EACA,MAAKjC,WAAL,CAAiB1C,GAAG,CAACP,IAArB,EACA,MAAKwD,OAAL,CAAajD,GAAG,CAACP,IAAjB,EACA,OAAQO,GAAG,CAACP,IAAZ,EACI,IAAK,KAAL,CACI,MAAKJ,KAAL,CAAWC,MAAX,CAAkB+B,SAAlB,CAA4B,MAA5B,CAAmC,eAAnC,EACA,MACJ,IAAK,GAAL,CACI,MAAKhC,KAAL,CAAWC,MAAX,CAAkB+B,SAAlB,CAA4B,MAA5B,CAAmC,aAAnC,EACA,MANR,CAQA,MAAKX,QAAL,CAAc,CAACd,QAAQ,CAACI,GAAG,CAACgC,IAAd,CAAd,EACA,MAAK3C,KAAL,CAAWC,MAAX,CAAkBgC,QAAlB,CAA2BtB,GAAG,CAACiC,OAA/B,EACA,MAAK5C,KAAL,CAAWC,MAAX,CAAkBuD,EAAlB,CAAqB,QAArB,CAA8B,SAACC,EAAD,CAAM,CAChC,GAAG,MAAKzD,KAAL,CAAWK,aAAX,GAA2BM,GAAG,CAACP,IAA/B,EAAuCO,GAAG,CAACH,MAAJ,GAAa,OAAvD,CAA+D,CAC3DG,GAAG,CAACiC,OAAJ,CAAYa,EAAE,CAACtB,QAAH,EAAZ,CACA,MAAKuB,WAAL,CAAiB/C,GAAjB,CAAqB2E,GAArB,EACH,CACJ,CALD,EAMH,C,OAEDC,W,sEAAY,8JACJC,IADI,CACC,EADD,cAEA,MAAKxF,KAAL,CAAWI,IAFX,+BAGC,KAHD,kBAMC,GAND,kBAIAoF,IAAI,CAAC,KAAL,CAJA,2CAOAA,IAAI,CAAC,GAAL,CAPA,2CAUAA,IAAI,CAAC,GAAL,CAVA,4CAaF7E,GAbE,CAaE,MAAKX,KAAL,CAAWC,MAAX,CAAkBkC,QAAlB,EAbF,yBAcetC,CAAAA,OAAO,CAACmF,IAAR,CAAa,SAAb,CAAuB,CAC1CS,MAAM,CAAC,CACHC,aAAa,CAAC,0CADX,CAEHC,KAAK,CAAC,CAFH,CAGHC,MAAM,CAACjF,GAHJ,CAIH6E,IAAI,CAACA,IAJF,CAKHK,UAAU,CAAE,CALT,CAMHC,YAAY,CAAE,MANX,CADmC,CAAvB,CAdf,SAcFC,QAdE,gBAwBRC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAxBQ,yD,gGA7WQ,iBAChBvG,QAAQ,CAACC,IAAT,GAAgByG,kBAAhB,CAAmC,SAAArB,IAAI,CAAE,CACrC,GAAGA,IAAH,CAAQ,CACJ,MAAI,CAACH,WAAL,CAAiB,CAACG,IAAI,CAAJA,IAAD,CAAjB,EACH,CACJ,CAJD,EAMH,C,6DACkB,iBACf,GAAMtD,CAAAA,GAAG,CAACC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAV,CACA,GAAGF,GAAH,CAAO,CACH,GAAMZ,CAAAA,GAAG,CAACe,IAAI,CAACC,KAAL,CAAWJ,GAAX,CAAV,CACA,KAAKF,QAAL,CAAc,CAACV,GAAG,CAACA,GAAL,CAAd,EACA,KAAKU,QAAL,CAAc,CAACX,MAAM,CAACC,GAAG,CAACD,MAAZ,CAAd,EACA,KAAKW,QAAL,CAAc,CAACL,QAAQ,CAACc,QAAQ,CAACnB,GAAG,CAACK,QAAL,CAAlB,CAAd,EACA,KAAK4C,OAAL,CAAajD,GAAG,CAACP,IAAjB,EACA,KAAKiD,WAAL,CAAiB1C,GAAG,CAACP,IAArB,EACA,KAAKiB,QAAL,CAAc,CAACJ,OAAO,CAACa,QAAQ,CAACnB,GAAG,CAACM,OAAL,CAAjB,CAAd,EACA,KAAKI,QAAL,CAAc,CAACH,KAAK,CAACP,GAAG,CAACO,KAAX,CAAd,EACH,CACD,GAAMT,CAAAA,EAAE,CAAG,KAAK0F,KAAL,CAAWC,KAAX,CAAiBX,MAAjB,CAAwBhF,EAAnC,CACA,GAAGA,EAAH,CAAM,CACFsD,UAAU,CAAC,UAAM,CACb,MAAI,CAACR,YAAL,CAAkB9C,EAAlB,EACH,CAFS,CAER,IAFQ,CAAV,CAGH,CAJD,IAKI,CACAsD,UAAU,CAAC,UAAM,CACb,MAAI,CAACzC,eAAL,GACC,CAFK,CAEH,GAFG,CAAV,CAGH,CACJ,C,mEAEsB,CAClB,GAAG,KAAKtB,KAAL,CAAWY,MAAX,CAAkB,CAAlB,EAAuB,KAAKZ,KAAL,CAAWY,MAAX,CAAoB,KAAKZ,KAAL,CAAWC,MAAX,CAAkBkC,QAAlB,GAA6BvB,MAA3E,CAAkF,CAC9E,KAAKyB,aAAL,GACH,CACF/C,IAAI,CAAC+G,aAAL,CAAmB,KAAKpB,GAAxB,EACH,C,+DAEmB,CAChB,GAAMlC,CAAAA,KAAK,CAAC,CACR3C,IAAI,CAAC,KAAKJ,KAAL,CAAWK,aAAX,EAA4B,EADzB,CAERW,QAAQ,CAAC,KAAKhB,KAAL,CAAWgB,QAAX,EAAuB,EAFxB,CAGRC,OAAO,CAAE,KAAKjB,KAAL,CAAWiB,OAAX,EAAsB,EAHvB,CAIRC,KAAK,CAAE,KAAKlB,KAAL,CAAWkB,KAAX,EAAoB,EAJnB,CAKRR,MAAM,CAAC,KAAKV,KAAL,CAAWU,MALV,CAAZ,CAOAc,YAAY,CAACwB,OAAb,CAAqB,SAArB,CAA+BtB,IAAI,CAACuB,SAAL,CAAeF,KAAf,CAA/B,EAEH,C,uCAwVO,CACJ,mBACI,2BAAK,SAAS,CAAC,iBAAf,CAAiC,KAAK,CAAE,CAACuD,WAAW,CAAC,KAAb,CAAmBC,YAAY,CAAC,KAAhC,CAAxC,eACI,2BAAK,SAAS,CAAC,cAAf,eACI,oBAAC,MAAD,EAAQ,MAAM,CAAE,KAAKpB,MAArB,CAA6B,SAAS,CAAE,KAAK/C,SAA7C,CAAwD,GAAG,CAAE,KAAKpC,KAAL,CAAWa,GAAxE,CAA6E,KAAK,CAAE,KAAKb,KAAL,CAAWc,KAA/F,CAAsG,QAAQ,CAAE,KAAKmD,QAArH,CAA+H,MAAM,CAAE,KAAKC,MAA5I,CAAoJ,OAAO,CAAE,KAAKC,OAAlK,CAA2K,MAAM,CAAE,KAAKnE,KAAL,CAAWE,MAA9L,CAAsM,QAAQ,CAAE,KAAK2D,QAArN,CAA+N,MAAM,CAAE,KAAKO,MAA5O,EADJ,cAEI,oBAAC,YAAD,EAAc,MAAM,CAAE,KAAKpE,KAAL,CAAWe,MAAjC,CAAyC,SAAS,CAAE,KAAKqB,SAAzD,CAAoE,YAAY,CAAE,KAAKiC,YAAvF,EAFJ,cAGI,2BAAK,SAAS,CAAC,KAAf,EAHJ,cAII,2BAAK,SAAS,CAAC,EAAf,CAAkB,KAAK,CAAE,CAACmC,UAAU,CAAC,MAAZ,CAAmBC,WAAW,CAAC,MAA/B,CAAzB,eACI,oBAAC,GAAD,mBACI,oBAAC,aAAD,EAAe,WAAW,CAAE,KAAKlB,WAAjC,CAA8C,WAAW,CAAE,KAAKnE,WAAhE,CAA6E,QAAQ,CAAE,KAAKpB,KAAL,CAAWmB,QAAlG,CAA4G,SAAS,CAAE,KAAKe,SAA5H,CAAuI,MAAM,CAAE,KAAKlC,KAAL,CAAWY,MAA1J,CAAkK,QAAQ,CAAE,KAAK0C,QAAjL,CAA2L,MAAM,CAAE,KAAKtD,KAAL,CAAWC,MAA9M,CAAsN,SAAS,CAAE,KAAK+D,SAAtO,CAAiP,MAAM,CAAE,KAAKI,MAA9P,CAAsQ,OAAO,CAAE,KAAKR,OAApR,CAA6R,WAAW,CAAE,KAAKP,WAA/S,CAA4T,aAAa,CAAE,KAAKrD,KAAL,CAAWK,aAAtV,CAAqW,OAAO,CAAE,KAAKL,KAAL,CAAWM,OAAzX,CAAkY,MAAM,CAAE,KAAKN,KAAL,CAAWQ,MAArZ,CAA6Z,SAAS,CAAE,KAAKsD,SAA7a,CAAwb,IAAI,CAAE,KAAKqC,KAAL,CAAWC,KAAX,CAAiBM,GAA/c,CAAod,EAAE,CAAE,KAAK1G,KAAL,CAAWS,EAAne,CAAue,YAAY,CAAE,KAAK0C,YAA1f,EADJ,cAEI,oBAAC,cAAD,EAAgB,MAAM,CAAE,KAAKnD,KAAL,CAAWU,MAAnC,CAA2C,UAAU,CAAE,KAAK2E,UAA5D,EAFJ,CADJ,CAJJ,cAUI,8BAVJ,cAWI,oBAAC,MAAD,MAXJ,CADJ,CADJ,CAiBH,C,iBAnbarG,KAAK,CAAC2H,S,EAsbxB,cAAe5G,CAAAA,GAAf","sourcesContent":["import React from \"react\";\r\nimport NavBar from \"./NavBar\";\r\nimport {Row} from 'reactstrap';\r\nimport Leftcomponent from \"./Leftcomponent\";\r\nimport Footer from \"./Footer\";\r\nimport Rightcomponent from \"./Rightcomponent\";\r\nimport base, {firebaseApp} from \"./base\";\r\nimport firebase ,{auth} from \"firebase\";\r\nimport Authanticate from \"./Authanticate\";\r\nimport { c, cpp } from \"../data\";\r\nimport Exicute from \"../Api/Exicute\";\r\nimport Axios from \"axios\";\r\nclass App extends React.Component{\r\n    state={\r\n        editor:{},\r\n        isopen:false,\r\n        savefiles:{},\r\n        mode:\"none\",\r\n        dropdownvalue:\"\",\r\n        issaved:false,\r\n        filename:\"\",\r\n        status:\"\",\r\n        id:null,\r\n        recent:{},\r\n        val:{},\r\n        length:-9999999999,\r\n        uid:null,\r\n        owner:null,\r\n        signup:false,\r\n        fontsize:14,\r\n        tabsize:4,\r\n        theme:\"blackboard\",\r\n        oldvalue:null,\r\n        \r\n    }\r\n    componentWillMount(){\r\n        firebase.auth().onAuthStateChanged(user=>{\r\n            if(user){  \r\n                this.authHandler({user});\r\n            }\r\n        })\r\n      \r\n    }\r\n    componentDidMount(){\r\n        const res=localStorage.getItem(\"CodeBix\");\r\n        if(res){\r\n            const val=JSON.parse(res);\r\n            this.setState({val:val});\r\n            this.setState({recent:val.recent});\r\n            this.setState({fontsize:parseInt(val.fontsize)});\r\n            this.setmode(val.mode);\r\n            this.setdropdown(val.mode);\r\n            this.setState({tabsize:parseInt(val.tabsize)});\r\n            this.setState({theme:val.theme});\r\n        }   \r\n        const id = this.props.match.params.id;\r\n        if(id){\r\n            setTimeout(() => {\r\n                this.updateeditor(id);\r\n            },3400);\r\n        }\r\n        else{\r\n            setTimeout(() => {\r\n                this.previoussetting();\r\n                }, 500); \r\n        }\r\n    }\r\n\r\n     componentWillUnmount(){\r\n         if(this.state.length>0 && this.state.length < this.state.editor.getValue().length){\r\n             this.savedlastfile();\r\n         }\r\n        base.removeBinding(this.ref);\r\n    }\r\n   \r\n    componentDidUpdate(){\r\n        const final={\r\n            mode:this.state.dropdownvalue || \"\",\r\n            fontsize:this.state.fontsize || \"\",\r\n            tabsize: this.state.tabsize || \"\",\r\n            theme: this.state.theme || \"\",\r\n            recent:this.state.recent\r\n        }\r\n        localStorage.setItem(\"CodeBix\",JSON.stringify(final));\r\n\r\n    }\r\n\r\n    setoldvalue=(val)=>{\r\n        this.setState({oldvalue:val});\r\n    }\r\n    previoussetting=()=>{\r\n        const res=localStorage.getItem(\"CodeBix\");\r\n        var val = JSON.parse(res);\r\n        if(val && val.mode && val.fontsize){\r\n            this.state.editor.getWrapperElement().style[\"font-size\"]=parseInt(val.fontsize)+\"px\";\r\n            this.state.editor.refresh();\r\n            switch (val.mode) {\r\n                case \"C++\":\r\n                    this.state.editor.setOption(\"mode\",\"text/x-c++src\");\r\n                    this.state.editor.setValue(cpp);\r\n                    this.setlength(this.state.editor.getValue().length);\r\n                    break;\r\n                case \"C\":\r\n                    this.state.editor.setOption(\"mode\",\"text/x-csrc\");\r\n                    this.state.editor.setValue(c);\r\n                    this.setlength(this.state.editor.getValue().length);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            this.setoldvalue(val.mode);\r\n            this.state.editor.setOption(\"indentUnit\",parseInt(val.tabsize));\r\n            this.state.editor.setOption(\"theme\",val.theme);\r\n            \r\n        }        \r\n    }\r\n\r\n    setsignup=()=>{\r\n        this.setState({signup:!this.state.signup});\r\n    }\r\n\r\n    savedlastfile=()=>{\r\n        const len =Object.keys(this.state.recent).length;\r\n        if(len<5){\r\n            let id =null;\r\n            let data={};\r\n            if(!this.state.issaved){                \r\n               const file={\r\n                   name:\"Unknown\",\r\n                   content:this.state.editor.getValue(),\r\n                   mode:this.state.dropdownvalue,\r\n                   status:\"Unsaved\"\r\n               }\r\n               id=Date.now();\r\n               data=file;\r\n            }\r\n            else{\r\n                id=this.state.id;\r\n               data=this.state.savefiles[this.state.id];\r\n            }\r\n            let recent={...this.state.recent};\r\n            recent[id]=data;\r\n            const final={\r\n                mode:\"\",\r\n                fontsize:\"\",\r\n                recent:recent\r\n            }\r\n            localStorage.setItem(\"CodeBix\",JSON.stringify(final));\r\n            this.setState({recent});\r\n            \r\n        }\r\n        else{\r\n           const index= Object.keys(this.state.recent)[0];\r\n           let recent={...this.state.recent};\r\n           delete recent[index];\r\n           let id =null;\r\n            let data={};\r\n            if(!this.state.issaved){\r\n               const file={\r\n                   name:\"Unknown\",\r\n                   content:this.state.editor.getValue(),\r\n                   mode:this.state.dropdownvalue,\r\n                   status:\"Unsaved\"\r\n               }\r\n               id=Date.now();\r\n               data=file;\r\n            }\r\n            else{\r\n                id=this.state.id;\r\n               data=this.state.savefiles[this.state.id];\r\n            }\r\n            recent[id]=data;\r\n            const final={\r\n                mode:\"\",\r\n                fontsize:\"\",\r\n                recent:recent\r\n            }\r\n            localStorage.setItem(\"CodeBix\",JSON.stringify(final));\r\n            this.setState({recent:recent});\r\n            \r\n        }\r\n    }\r\n\r\n    updaterecent=()=>{\r\n        const len =Object.keys(this.state.recent).length;\r\n        if(len<5){\r\n            let id =null;\r\n            let data={};\r\n            if(!this.state.issaved){                \r\n               const file={\r\n                   name:\"Unknown\",\r\n                   content:this.state.editor.getValue(),\r\n                   mode:this.state.dropdownvalue,\r\n                   status:\"Unsaved\"\r\n               }\r\n               id=Date.now();\r\n               data=file;\r\n            }\r\n            else{\r\n                id=this.state.id;\r\n               data=this.state.savefiles[this.state.id];\r\n            }\r\n            let recent={...this.state.recent};\r\n            recent[id]=data;\r\n            this.setState({recent});\r\n            \r\n        }\r\n        else{\r\n           const index= Object.keys(this.state.recent)[0];\r\n           let recent={...this.state.recent};\r\n           delete recent[index];\r\n           let id =null;\r\n            let data={};\r\n            if(!this.state.issaved){\r\n               const file={\r\n                   name:\"Unknown\",\r\n                   content:this.state.editor.getValue(),\r\n                   mode:this.state.dropdownvalue,\r\n                   status:\"Unsaved\"\r\n               }\r\n               id=Date.now();\r\n               data=file;\r\n            }\r\n            else{\r\n                id=this.state.id;\r\n               data=this.state.savefiles[this.state.id];\r\n            }\r\n            recent[id]=data;\r\n            this.setState({recent:recent});\r\n        }\r\n      \r\n    }\r\n\r\n    setid=(val)=>{\r\n        this.setState({id:val});\r\n    }\r\n    setdropdown=(val)=>{\r\n        this.setState({dropdownvalue:val});\r\n    }\r\n    setsaved=()=>{\r\n        this.setState({issaved:!this.state.issaved});\r\n    }\r\n\r\n    updateeditor=(id)=>{\r\n        if(id && this.state.savefiles[id]){\r\n            const data = this.state.savefiles[id];\r\n            this.setid(id);\r\n            this.setsaved();\r\n            this.setdropdown(data.mode);\r\n            this.state.editor.setValue(data.content);\r\n            switch (data.mode) {\r\n                case \"C++\":\r\n                    this.state.editor.setOption(\"mode\",\"text/x-c++src\");\r\n                    break;\r\n                case \"C\":\r\n                    this.state.editor.setOption(\"mode\",\"text/x-csrc\");\r\n                    break;\r\n            }\r\n            this.setState({length:this.state.editor.getValue().length});   \r\n            this.state.editor.on('change',(cm)=>{\r\n                if(this.state.dropdownvalue===data.mode){\r\n                    data.content=cm.getValue();\r\n                    this.updatevalue(id,data);\r\n                \r\n                }\r\n            });\r\n        \r\n        }\r\n    }\r\n\r\n    updatevalue=(key,val)=>{\r\n        const savefiles={...this.state.savefiles};\r\n        savefiles[key]=val;\r\n        this.setState({savefiles:savefiles});        \r\n    }\r\n\r\n    setmode=(val)=>{\r\n        this.setState({mode:val});\r\n    }\r\n    savefile=(val)=>{\r\n        this.setState({issaved:true});  \r\n        this.setstatus(\"Saving...\");\r\n        const data={\r\n            name:val,\r\n            content:this.state.editor.getValue(),\r\n            status:\"saved\",\r\n            mode:this.state.mode\r\n        }\r\n        const savefiles ={...this.state.savefiles};\r\n        const id =Date.now();\r\n        this.setid(id);\r\n        savefiles[id]=data;\r\n        this.setState({savefiles:savefiles});\r\n        setTimeout(() => {\r\n            this.setstatus(data.name);\r\n            this.updaterecent();\r\n        }, 1000);\r\n        \r\n        this.state.editor.on('change',(cm)=>{\r\n            if(this.state.dropdownvalue===data.mode){\r\n                this.setstatus(\"Saving...\");\r\n                data.content=cm.getValue();\r\n                this.updatevalue(id,data);\r\n                setTimeout(() => {\r\n                    this.setstatus(data.name);\r\n                }, 1000);\r\n\r\n            }\r\n        });\r\n    }\r\n    seteditor=(val)=>{\r\n        this.setState({editor:val});\r\n    }\r\n    settheme=(val)=>{\r\n        this.setState({theme:val});\r\n        this.state.editor.setOption(\"theme\",val);\r\n    }\r\n    settab=(val)=>{\r\n        this.setState({tabsize:val});\r\n        this.state.editor.setOption(\"indentUnit\",val);\r\n    }\r\n    setsize=(val)=>{\r\n        this.setState({fontsize:val});\r\n        this.state.editor.getWrapperElement().style[\"font-size\"]= val+\"px\";\r\n        this.state.editor.refresh();\r\n    }\r\n    toggle=()=>{\r\n        this.setState({isopen:!this.state.isopen});   \r\n    }\r\n    setstatus=(val)=>{\r\n        // console.log(val);\r\n        this.setState({status:val});\r\n    }\r\n\r\n    setlength=(len)=>{\r\n        this.setState({length:len});\r\n    }\r\n\r\n    authenticate=(provider)=>{\r\n        const authprovider =new firebase.auth[`${provider}AuthProvider`]();\r\n        firebase.auth().signInWithPopup(authprovider).then(this.authHandler); \r\n        this.setsignup();\r\n       \r\n    }\r\n\r\n    authHandler= async (authdata)=>{\r\n        // look up a store ito the firebase.\r\n        const store = await base.fetch(authdata.user.uid,{context:this});\r\n        //claim if there is no owner.\r\n        if(!store.user){\r\n            await base.post(`${authdata.user.uid}/user`,{\r\n                data:authdata.user.uid\r\n            });\r\n        }\r\n        //set the state of the inventory compnent.\r\n        this.setState({\r\n            uid:authdata.user.uid,\r\n            owner:store.user || authdata.user.uid\r\n        });\r\n        this.ref= base.syncState(`${authdata.user.uid}/savefiles`,{\r\n            context:this,\r\n            state:'savefiles'\r\n        });\r\n\r\n    }\r\n    logout = async () =>{\r\n        await firebase.auth().signOut();\r\n        this.setState({\r\n            uid:null\r\n        });\r\n    }\r\n\r\n    editrecent=(val,ind)=>{\r\n        this.setState({issaved:false});\r\n        if(val.status===\"saved\"){\r\n            this.setsaved();\r\n            this.setstatus(val.name);\r\n        }\r\n        \r\n        this.setid(ind);\r\n        this.setdropdown(val.mode);\r\n        this.setmode(val.mode);\r\n        switch (val.mode) {\r\n            case \"C++\":\r\n                this.state.editor.setOption(\"mode\",\"text/x-c++src\");\r\n                break;\r\n            case \"C\":\r\n                this.state.editor.setOption(\"mode\",\"text/x-csrc\");\r\n                break;\r\n        }\r\n        this.setState({filename:val.name});\r\n        this.state.editor.setValue(val.content);\r\n        this.state.editor.on('change',(cm)=>{\r\n            if(this.state.dropdownvalue===val.mode && val.status===\"saved\"){\r\n                val.content=cm.getValue();\r\n                this.updatevalue(val,ind);\r\n            }\r\n        });\r\n    }\r\n\r\n    Exicutecode=async()=>{\r\n        var lang=\"\";\r\n        switch (this.state.mode) {\r\n            case \"C++\":\r\n                lang=\"CPP\";\r\n                break;\r\n            case \"C\":\r\n                lang=\"C\";\r\n                break;\r\n            default:\r\n                lang=\" \";\r\n                break;\r\n        }\r\n        const val=this.state.editor.getValue();\r\n        const response = await Exicute.post(\"compile\",{\r\n            params:{\r\n                client_secret:\"5974f281c1b781f2aeb1b7730e53ea82c6b21d50\",\r\n                async:0,\r\n                source:val,\r\n                lang:lang,\r\n                time_limit: 5,\r\n                memory_limit: 262144\r\n            }\r\n        });\r\n        console.log(response);\r\n\r\n    }\r\n\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"container-fluid\" style={{paddingLeft:\"0px\",paddingRight:\"0px\"}}>\r\n                <div className=\"main-wrapper\">\r\n                    <NavBar logout={this.logout} setsignup={this.setsignup} uid={this.state.uid} owner={this.state.owner} settheme={this.settheme} settab={this.settab} setsize={this.setsize} isopen={this.state.isopen} savefile={this.savefile} toggle={this.toggle}/>\r\n                    <Authanticate signup={this.state.signup} setsignup={this.setsignup} authenticate={this.authenticate}/>\r\n                    <div className=\"gap\"></div>\r\n                    <div className=\"\" style={{marginLeft:\"20px\",marginRight:\"20px\"}}>\r\n                        <Row>\r\n                            <Leftcomponent Exicutecode={this.Exicutecode} setoldvalue={this.setoldvalue} oldvalue={this.state.oldvalue} setlength={this.setlength} length={this.state.length} setsaved={this.setsaved} editor={this.state.editor} seteditor={this.seteditor} toggle={this.toggle} setmode={this.setmode} setdropdown={this.setdropdown} dropdownvalue={this.state.dropdownvalue} issaved={this.state.issaved} status={this.state.status} setstatus={this.setstatus} path={this.props.match.url} id={this.state.id} updaterecent={this.updaterecent}/>\r\n                            <Rightcomponent recent={this.state.recent} editrecent={this.editrecent}/>\r\n                        </Row>\r\n                    </div>\r\n                    <br></br>\r\n                    <Footer/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}