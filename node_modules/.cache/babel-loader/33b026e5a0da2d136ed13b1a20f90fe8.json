{"ast":null,"code":"var _jsxFileName = \"E:\\\\Internship Project\\\\codebix\\\\src\\\\components\\\\Files.js\";\nimport React from \"react\";\nimport { Row, Col, Container, Button } from \"reactstrap\";\nimport Filecontainer from \"./Filecontainer\";\nimport { Link } from \"react-router-dom/cjs/react-router-dom.min\";\nimport Share from \"./Share\";\nimport base, { firebaseApp } from \"./base\";\nimport firebase, { auth } from \"firebase\";\n\nclass Files extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.preRef = React.createRef();\n    this.nextRef = React.createRef();\n    this.firstRef = React.createRef();\n    this.lastRef = React.createRef();\n    this.state = {\n      savefiles: {},\n      result: null,\n      flag: false,\n      isShare: false,\n      id: null,\n      uid: null,\n      owner: null,\n      pagelist: null,\n      currentPage: 1,\n      numberPerPage: 9,\n      numberOfPages: 1\n    };\n\n    this.authHandler = async authdata => {\n      // look up a store ito the firebase.\n      const store = await base.fetch(authdata.user.uid, {\n        context: this\n      }); //claim if there is no owner.\n\n      if (!store.user) {\n        await base.post(`${authdata.user.uid}/user`, {\n          data: authdata.user.uid\n        });\n      } //set the state of the inventory compnent.\n\n\n      this.setState({\n        uid: authdata.user.uid,\n        owner: store.user || authdata.user.uid\n      });\n      this.ref = base.syncState(`${authdata.user.uid}/savefiles`, {\n        context: this,\n        state: 'savefiles'\n      });\n    };\n\n    this.setshare = () => {\n      this.setState({\n        isShare: !this.state.isShare\n      });\n    };\n\n    this.handlechange = event => {\n      if (!this.state.flag) {\n        this.setState({\n          flag: true\n        });\n      }\n\n      this.setState({\n        pagelist: null\n      });\n      const result = {};\n      const val = event.currentTarget.value;\n\n      if (val === \"Choose language\") {\n        this.setState({\n          flag: false\n        });\n      }\n\n      setTimeout(() => {\n        Object.keys(this.state.savefiles).map(key => {\n          if (this.state.savefiles[key].mode === val) {\n            result[key] = this.state.savefiles[key];\n          }\n        });\n        this.setState({\n          result: result\n        });\n        this.getNumberOfPages(result);\n      }, 3300);\n    };\n\n    this.handledelete = ind => {\n      let savefiles = { ...this.state.savefiles\n      };\n      let result = { ...this.state.result\n      };\n      console.table(savefiles);\n      console.log(\"######################################\");\n      savefiles[ind] = null;\n      console.table(savefiles);\n      this.setState({\n        savefiles: savefiles\n      });\n      result[ind] = null;\n      this.setState({\n        result\n      });\n      console.log(\"######################################\");\n      console.table(this.state.savefiles);\n    };\n\n    this.editfile = val => {\n      const win = window.open(`/files/${val}`, '_blank');\n\n      if (win) {\n        win.focus();\n      }\n\n      base.removeBinding(this.ref);\n    };\n\n    this.setid = val => {\n      this.setState({\n        id: val\n      });\n    };\n\n    this.getNumberOfPages = result => {\n      this.setState({\n        numberOfPages: Math.ceil(Object.keys(result).length / this.state.numberPerPage)\n      });\n    };\n\n    this.nextPage = () => {\n      this.setState({\n        currentPage: this.state.currentPage + 1\n      });\n      setTimeout(() => {\n        this.loadList();\n      }, 1000);\n    };\n\n    this.previousPage = () => {\n      this.setState({\n        currentPage: this.state.currentPage - 1\n      });\n      setTimeout(() => {\n        this.loadList();\n      }, 1000);\n    };\n\n    this.lastPage = () => {\n      this.setState({\n        currentPage: this.state.numberOfPages\n      });\n      setTimeout(() => {\n        this.loadList();\n      }, 1000);\n    };\n\n    this.loadList = () => {\n      var begin = (this.state.currentPage - 1) * this.state.numberPerPage;\n      var end = begin + this.state.numberPerPage;\n      const res = Object.keys(this.state.result).slice(begin, end);\n      console.log(res);\n      this.setState({\n        pagelist: Object.assign({}, res)\n      });\n    };\n  }\n\n  componentWillMount() {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        this.authHandler({\n          user\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.ref = base.syncState(\"//savefiles\", {\n      context: this,\n      state: 'savefiles'\n    });\n  }\n\n  componentWillUnmount() {\n    base.removeBinding(this.ref);\n  }\n\n  firstPage() {\n    this.setState({\n      currentPage: 1\n    });\n    setTimeout(() => {\n      this.loadList();\n    }, 1000);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      style: {\n        padding: \"0px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrapper-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      style: {\n        textAlign: \"center\",\n        padding: \"14px\",\n        background: \"whitesmoke\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      style: {\n        textDecoration: \"none\"\n      },\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-code\",\n      style: {\n        color: \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: \"gray\",\n        paddingLeft: \"3px\",\n        fontWeight: \"200\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 37\n      }\n    }, \"CodeBix\"))))), /*#__PURE__*/React.createElement(Share, {\n      isShare: this.state.isShare,\n      setshare: this.setshare,\n      path: this.props.match.url,\n      id: this.state.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"back-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      lg: \"5\",\n      md: \"6\",\n      sm: \"9\",\n      xs: \"9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      onChange: this.handlechange,\n      style: {\n        display: \"block\",\n        border: \"block\",\n        width: \"100%\",\n        height: \"35px\",\n        borderColor: \"black\",\n        borderWidth: \"2px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      value: \"Choose language\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 41\n      }\n    }, \"Choose language\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"C++\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 41\n      }\n    }, \"C++\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"C\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 41\n      }\n    }, \"C\"))))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Container, {\n      style: {\n        border: \"1px solid lightgray\",\n        paddingBottom: \"20px\",\n        marginTop: \"10px\",\n        minHeight: \"450px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Filecontainer, {\n      result: this.state.result,\n      flag: this.state.flag,\n      handledelete: this.handledelete,\n      editfile: this.editfile,\n      setid: this.setid,\n      setshare: this.setshare,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      lg: \"4\",\n      md: \"3\",\n      sm: \"2\",\n      xs: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Col, {\n      lg: \"4\",\n      md: \"6\",\n      sm: \"8\",\n      xs: \"8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pagination\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      id: \"previous\",\n      ref: this.preRef,\n      onClick: () => this.previousPage(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 37\n      }\n    }, \"Prev\"), /*#__PURE__*/React.createElement(Button, {\n      id: \"first\",\n      ref: this.firstRef,\n      onClick: () => this.firstPage(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 37\n      }\n    }, \"First\"), /*#__PURE__*/React.createElement(Button, {\n      id: \"next\",\n      ref: this.nextRef,\n      onClick: () => this.nextPage(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 37\n      }\n    }, \"Next\"), /*#__PURE__*/React.createElement(Button, {\n      id: \"last\",\n      ref: this.lastRef,\n      onClick: () => this.lastPage(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 37\n      }\n    }, \"Last\"))), /*#__PURE__*/React.createElement(Col, {\n      lg: \"4\",\n      md: \"3\",\n      sm: \"2\",\n      xs: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 29\n      }\n    })))));\n  }\n\n}\n\nexport default Files;","map":{"version":3,"sources":["E:/Internship Project/codebix/src/components/Files.js"],"names":["React","Row","Col","Container","Button","Filecontainer","Link","Share","base","firebaseApp","firebase","auth","Files","Component","preRef","createRef","nextRef","firstRef","lastRef","state","savefiles","result","flag","isShare","id","uid","owner","pagelist","currentPage","numberPerPage","numberOfPages","authHandler","authdata","store","fetch","user","context","post","data","setState","ref","syncState","setshare","handlechange","event","val","currentTarget","value","setTimeout","Object","keys","map","key","mode","getNumberOfPages","handledelete","ind","console","table","log","editfile","win","window","open","focus","removeBinding","setid","Math","ceil","length","nextPage","loadList","previousPage","lastPage","begin","end","res","slice","assign","componentWillMount","onAuthStateChanged","componentDidMount","componentWillUnmount","firstPage","render","padding","textAlign","background","textDecoration","color","paddingLeft","fontWeight","props","match","url","display","border","width","height","borderColor","borderWidth","paddingBottom","marginTop","minHeight"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Row, Col,Container, Button} from \"reactstrap\";\r\nimport Filecontainer from \"./Filecontainer\";\r\nimport { Link } from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport Share from \"./Share\";\r\nimport base, {firebaseApp} from \"./base\";\r\nimport firebase ,{auth} from \"firebase\";\r\nclass Files extends React.Component{\r\n    preRef=React.createRef();\r\n    nextRef=React.createRef();\r\n    firstRef=React.createRef();\r\n    lastRef=React.createRef();\r\n    state={\r\n        savefiles:{},\r\n        result:null,\r\n        flag:false,\r\n        isShare:false,\r\n        id:null,\r\n        uid:null,\r\n        owner:null,\r\n        pagelist:null,\r\n        currentPage : 1,\r\n        numberPerPage :9,\r\n        numberOfPages : 1\r\n    };\r\n    componentWillMount(){\r\n        firebase.auth().onAuthStateChanged(user=>{\r\n            if(user){  \r\n                this.authHandler({user});\r\n            }\r\n        })\r\n      \r\n    }\r\n    componentDidMount(){\r\n      this.ref= base.syncState(\"//savefiles\",{\r\n        context:this,\r\n        state: 'savefiles'\r\n      }\r\n      );\r\n    }\r\n    componentWillUnmount(){\r\n        base.removeBinding(this.ref);\r\n    }\r\n    authHandler= async (authdata)=>{\r\n        // look up a store ito the firebase.\r\n        const store = await base.fetch(authdata.user.uid,{context:this});\r\n        //claim if there is no owner.\r\n        if(!store.user){\r\n            await base.post(`${authdata.user.uid}/user`,{\r\n                data:authdata.user.uid\r\n            });\r\n        }\r\n        //set the state of the inventory compnent.\r\n        this.setState({\r\n            uid:authdata.user.uid,\r\n            owner:store.user || authdata.user.uid\r\n        });\r\n            this.ref= base.syncState(`${authdata.user.uid}/savefiles`,{\r\n                context:this,\r\n                state:'savefiles'\r\n            });\r\n   \r\n\r\n    }\r\n\r\n    setshare=()=>{\r\n        this.setState({isShare:!this.state.isShare});\r\n    }\r\n\r\n    handlechange=(event)=>{\r\n        if(!this.state.flag){\r\n            this.setState({flag:true});\r\n        }\r\n        this.setState({pagelist:null});\r\n        const result={};\r\n        const val = event.currentTarget.value;\r\n        if(val===\"Choose language\"){\r\n            this.setState({flag:false});\r\n        }\r\n        setTimeout(() => {\r\n            Object.keys(this.state.savefiles).map((key)=>{\r\n                if(this.state.savefiles[key].mode===val){\r\n                    result[key]=this.state.savefiles[key];\r\n                }\r\n            });    \r\n            this.setState({result:result});\r\n            this.getNumberOfPages(result);\r\n        },3300);\r\n        \r\n    }\r\n    handledelete=(ind)=>{\r\n        let savefiles = {...this.state.savefiles};\r\n        let result = {...this.state.result};\r\n        console.table(savefiles);\r\n        console.log(\"######################################\");\r\n        savefiles[ind]=null;\r\n        console.table(savefiles);\r\n        this.setState({savefiles:savefiles});\r\n        result[ind]=null;\r\n        this.setState({result});\r\n        console.log(\"######################################\");\r\n\r\n        console.table(this.state.savefiles);  \r\n    }\r\n    editfile=(val)=>{\r\n        const win=window.open(`/files/${val}`,'_blank');\r\n        if(win){\r\n            win.focus();\r\n        }\r\n        base.removeBinding(this.ref);\r\n\r\n    }\r\n    setid=(val)=>{\r\n        this.setState({id:val});\r\n    }\r\n\r\n    getNumberOfPages=(result)=>{\r\n        this.setState({numberOfPages:Math.ceil(Object.keys(result).length / this.state.numberPerPage)})\r\n    }\r\n    nextPage=()=>{\r\n        this.setState({currentPage:this.state.currentPage+1});\r\n        setTimeout(() => {\r\n            this.loadList();\r\n        }, 1000);\r\n    }\r\n    previousPage=()=> {\r\n        this.setState({currentPage:this.state.currentPage-1});\r\n        setTimeout(() => {\r\n            this.loadList();\r\n        }, 1000);\r\n    }\r\n    firstPage() {\r\n        this.setState({currentPage:1});\r\n        setTimeout(() => {\r\n            this.loadList();\r\n        }, 1000);\r\n    }\r\n    lastPage=()=> {\r\n        this.setState({currentPage:this.state.numberOfPages});\r\n        setTimeout(() => {\r\n            this.loadList();\r\n        }, 1000);\r\n        \r\n    }\r\n    loadList=()=> {\r\n        var begin = ((this.state.currentPage - 1) * this.state.numberPerPage);\r\n        var end = begin + this.state.numberPerPage;\r\n        const res= Object.keys(this.state.result).slice(begin, end);\r\n        console.log(res);\r\n        this.setState({pagelist:Object.assign({},res)});\r\n    }\r\n    render(){\r\n        return(\r\n            <div className=\"container-fluid\" style={{padding:\"0px\"}}>\r\n                <div className=\"wrapper-box\">\r\n                    <nav style={{textAlign:\"center\",padding:\"14px\",background:\"whitesmoke\"}}>\r\n                        <div className=\"container\">\r\n                            <h5>\r\n                                <Link style={{textDecoration:\"none\"}} to=\"/\">\r\n                                    <i className=\"fas fa-code\"  style={{color:\"black\"}} ></i>\r\n                                    <span style={{color:\"gray\",paddingLeft:\"3px\",fontWeight:\"200\"}}>CodeBix</span>\r\n                                </Link>\r\n                            </h5>\r\n                        </div>\r\n                        \r\n                    </nav>\r\n                    <Share isShare={this.state.isShare} setshare={this.setshare} path={this.props.match.url} id={this.state.id} />\r\n                    <div className=\"container\">\r\n                        <br></br>\r\n                        <div className=\"back-div\">\r\n                            <Row>\r\n                                <Col lg=\"5\" md=\"6\" sm=\"9\" xs=\"9\" >\r\n                                    <select onChange={this.handlechange}  style={{display:\"block\",border:\"block\",width:\"100%\",height:\"35px\",borderColor:\"black\",borderWidth:\"2px\"}}>\r\n                                        <option selected value=\"Choose language\">Choose language</option>\r\n                                        \r\n                                        <option value=\"C++\">C++</option>\r\n                                        <option value=\"C\">C</option>\r\n                                    </select>\r\n                                    \r\n                                </Col>\r\n                            </Row>\r\n                        </div>\r\n                        <br></br>\r\n                        <Container style={{border:\"1px solid lightgray\",paddingBottom:\"20px\",marginTop:\"10px\",minHeight:\"450px\"}}>\r\n                            <Filecontainer result={this.state.result} flag={this.state.flag} handledelete={this.handledelete} editfile={this.editfile} setid={this.setid} setshare={this.setshare}/>\r\n                        </Container>\r\n                        <Row>\r\n                            <Col lg=\"4\" md=\"3\" sm=\"2\" xs=\"2\"></Col>\r\n                            <Col lg=\"4\" md=\"6\" sm=\"8\" xs=\"8\">\r\n                                <div className=\"pagination\">\r\n                                    <Button id=\"previous\" ref={this.preRef} onClick={()=>this.previousPage()}>Prev</Button>\r\n                                    <Button id=\"first\" ref={this.firstRef} onClick={()=>this.firstPage()}>First</Button>\r\n                                    <Button id=\"next\" ref={this.nextRef} onClick={()=>this.nextPage()}>Next</Button>\r\n                                    <Button id=\"last\" ref={this.lastRef} onClick={()=>this.lastPage()}>Last</Button>\r\n                                </div>\r\n                            </Col>\r\n                            <Col lg=\"4\" md=\"3\" sm=\"2\" xs=\"2\"></Col>\r\n                            \r\n                        </Row>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\nexport default Files;"]},"metadata":{},"sourceType":"module"}