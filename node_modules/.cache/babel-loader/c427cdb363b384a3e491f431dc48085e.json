{"ast":null,"code":"var _jsxFileName = \"E:\\\\Internship Project\\\\api\\\\codebix\\\\src\\\\components\\\\Files.js\";\nimport React from \"react\";\nimport { Row, Col, Container, Button } from \"reactstrap\";\nimport Filecontainer from \"./Filecontainer\";\nimport { Link } from \"react-router-dom/cjs/react-router-dom.min\";\nimport Share from \"./Share\";\nimport base from \"./base\";\nimport firebase from \"firebase\";\n\nclass Files extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.preRef = React.createRef();\n    this.nextRef = React.createRef();\n    this.firstRef = React.createRef();\n    this.lastRef = React.createRef();\n    this.state = {\n      savefiles: {},\n      result: null,\n      flag: false,\n      isShare: false,\n      id: null,\n      uid: null,\n      owner: null,\n      pagelist: null,\n      currentPage: 1,\n      numberPerPage: 9,\n      numberOfPages: 1\n    };\n\n    this.handlerefresh = () => {\n      this.handleauth();\n    };\n\n    this.handleauth = () => {\n      firebase.auth().onAuthStateChanged(user => {\n        if (user) {\n          this.authHandler({\n            user\n          });\n        }\n      });\n    };\n\n    this.authHandler = async authdata => {\n      // look up a store ito the firebase.\n      const store = await base.fetch(authdata.user.uid, {\n        context: this\n      }); //claim if there is no owner.\n\n      if (!store.user) {\n        await base.post(`${authdata.user.uid}/user`, {\n          data: authdata.user.uid\n        });\n      } //set the state of the inventory compnent.\n\n\n      this.setState({\n        uid: authdata.user.uid,\n        owner: store.user || authdata.user.uid\n      });\n      this.ref = base.syncState(`${authdata.user.uid}/savefiles`, {\n        context: this,\n        state: 'savefiles'\n      });\n    };\n\n    this.setshare = () => {\n      this.setState({\n        isShare: !this.state.isShare\n      });\n    };\n\n    this.handlechange = event => {\n      if (!this.state.flag) {\n        this.setState({\n          flag: true\n        });\n      }\n\n      this.setState({\n        pagelist: null\n      });\n      const result = {};\n      const val = event.currentTarget.value;\n\n      if (val === \"Choose language\") {\n        this.setState({\n          flag: false\n        });\n      }\n\n      setTimeout(() => {\n        Object.keys(this.state.savefiles).map(key => {\n          if (this.state.savefiles[key].mode === val) {\n            result[key] = this.state.savefiles[key];\n          }\n        });\n        this.setState({\n          result: result\n        });\n        this.getNumberOfPages(result);\n      }, 2000);\n      setTimeout(() => {\n        this.loadList();\n      }, 3300);\n    };\n\n    this.handledelete = ind => {\n      let savefiles = { ...this.state.savefiles\n      };\n      let result = { ...this.state.result\n      };\n      console.table(savefiles);\n      savefiles[ind] = null;\n      console.table(savefiles);\n      this.setState({\n        savefiles: savefiles\n      });\n      result[ind] = null;\n      this.setState({\n        result\n      });\n      console.table(this.state.savefiles);\n    };\n\n    this.editfile = val => {\n      const win = window.open(`/files/${btoa(this.state.uid)}/${val}`, '_blank');\n\n      if (win) {\n        win.focus();\n      }\n\n      base.removeBinding(this.ref);\n    };\n\n    this.setid = val => {\n      this.setState({\n        id: val\n      });\n    };\n\n    this.getNumberOfPages = result => {\n      this.setState({\n        numberOfPages: Math.ceil(Object.keys(result).length / this.state.numberPerPage)\n      });\n    };\n\n    this.nextPage = () => {\n      this.setState({\n        currentPage: this.state.currentPage + 1\n      });\n      setTimeout(() => {\n        this.loadList();\n      }, 1000);\n    };\n\n    this.previousPage = () => {\n      this.setState({\n        currentPage: this.state.currentPage - 1\n      });\n      setTimeout(() => {\n        this.loadList();\n      }, 1000);\n    };\n\n    this.lastPage = () => {\n      this.setState({\n        currentPage: this.state.numberOfPages\n      });\n      setTimeout(() => {\n        this.loadList();\n      }, 1000);\n    };\n\n    this.loadList = () => {\n      this.setState({\n        pagelist: null\n      });\n      var begin = (this.state.currentPage - 1) * this.state.numberPerPage;\n      var end = begin + this.state.numberPerPage;\n      const res = {};\n      var arr = Object.keys(this.state.result);\n\n      for (var i = begin; i < end; i++) {\n        if (i > -1 && i < arr.length) {\n          var ind = arr[i];\n          res[ind] = this.state.result[ind];\n        }\n      }\n\n      this.setState({\n        pagelist: res\n      });\n    };\n  }\n\n  componentWillMount() {\n    this.handleauth();\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"beforeunload\", this.onrefresh);\n    console.log(\"mounted!!!\");\n    const res = localStorage.getItem(\"CodeBix\");\n    localStorage.setItem(\"CodeBix\", res);\n  }\n\n  componentWillUnmount() {\n    console.log(\"unmounted!!!\");\n\n    if (this.ref) {\n      base.removeBinding(this.ref);\n    }\n  }\n\n  firstPage() {\n    this.setState({\n      currentPage: 1\n    });\n    setTimeout(() => {\n      this.loadList();\n    }, 1000);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      style: {\n        padding: \"0px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrapper-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      style: {\n        textAlign: \"center\",\n        padding: \"14px\",\n        background: \"whitesmoke\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      style: {\n        textDecoration: \"none\"\n      },\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-code\",\n      style: {\n        color: \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: \"gray\",\n        paddingLeft: \"3px\",\n        fontWeight: \"200\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 37\n      }\n    }, \"CodeBix\"))))), /*#__PURE__*/React.createElement(Share, {\n      isShare: this.state.isShare,\n      setshare: this.setshare,\n      path: this.props.match.url,\n      id: this.state.id,\n      uid: this.state.uid,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"back-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      lg: \"5\",\n      md: \"6\",\n      sm: \"9\",\n      xs: \"9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      onChange: this.handlechange,\n      style: {\n        display: \"block\",\n        border: \"block\",\n        width: \"100%\",\n        height: \"35px\",\n        borderColor: \"black\",\n        borderWidth: \"2px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      value: \"Choose language\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 41\n      }\n    }, \"Choose language\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"C++\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 41\n      }\n    }, \"C++\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"C\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 41\n      }\n    }, \"C\"))))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Container, {\n      style: {\n        border: \"1px solid lightgray\",\n        paddingBottom: \"20px\",\n        marginTop: \"10px\",\n        minHeight: \"450px\",\n        maxHeight: \"450px\",\n        overflow: \"scroll\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Filecontainer, {\n      uid: this.state.uid,\n      result: this.state.pagelist,\n      flag: this.state.flag,\n      handledelete: this.handledelete,\n      editfile: this.editfile,\n      setid: this.setid,\n      setshare: this.setshare,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      lg: \"4\",\n      md: \"3\",\n      sm: \"2\",\n      xs: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Col, {\n      lg: \"4\",\n      md: \"6\",\n      sm: \"8\",\n      xs: \"10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pagination\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      id: \"previous\",\n      ref: this.preRef,\n      onClick: () => this.previousPage(),\n      disabled: this.state.currentPage === 1 ? true : false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 37\n      }\n    }, \"Prev\"), /*#__PURE__*/React.createElement(Button, {\n      id: \"first\",\n      ref: this.firstRef,\n      onClick: () => this.firstPage(),\n      disabled: this.state.currentPage === 1 ? true : false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 37\n      }\n    }, \"First\"), /*#__PURE__*/React.createElement(Button, {\n      id: \"next\",\n      ref: this.nextRef,\n      onClick: () => this.nextPage(),\n      disabled: this.state.currentPage === this.state.numberOfPages ? true : false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 37\n      }\n    }, \"Next\"), /*#__PURE__*/React.createElement(Button, {\n      id: \"last\",\n      ref: this.lastRef,\n      onClick: () => this.lastPage(),\n      disabled: this.state.currentPage === this.state.numberOfPages ? true : false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 37\n      }\n    }, \"Last\"))), /*#__PURE__*/React.createElement(Col, {\n      lg: \"4\",\n      md: \"3\",\n      sm: \"2\",\n      xs: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 29\n      }\n    })))));\n  }\n\n}\n\nexport default Files;","map":{"version":3,"sources":["E:/Internship Project/api/codebix/src/components/Files.js"],"names":["React","Row","Col","Container","Button","Filecontainer","Link","Share","base","firebase","Files","Component","preRef","createRef","nextRef","firstRef","lastRef","state","savefiles","result","flag","isShare","id","uid","owner","pagelist","currentPage","numberPerPage","numberOfPages","handlerefresh","handleauth","auth","onAuthStateChanged","user","authHandler","authdata","store","fetch","context","post","data","setState","ref","syncState","setshare","handlechange","event","val","currentTarget","value","setTimeout","Object","keys","map","key","mode","getNumberOfPages","loadList","handledelete","ind","console","table","editfile","win","window","open","btoa","focus","removeBinding","setid","Math","ceil","length","nextPage","previousPage","lastPage","begin","end","res","arr","i","componentWillMount","componentDidMount","addEventListener","onrefresh","log","localStorage","getItem","setItem","componentWillUnmount","firstPage","render","padding","textAlign","background","textDecoration","color","paddingLeft","fontWeight","props","match","url","display","border","width","height","borderColor","borderWidth","paddingBottom","marginTop","minHeight","maxHeight","overflow"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Row, Col,Container, Button} from \"reactstrap\";\r\nimport Filecontainer from \"./Filecontainer\";\r\nimport { Link } from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport Share from \"./Share\";\r\nimport base from \"./base\";\r\nimport firebase from \"firebase\";\r\nclass Files extends React.Component{\r\n    preRef=React.createRef();\r\n    nextRef=React.createRef();\r\n    firstRef=React.createRef();\r\n    lastRef=React.createRef();\r\n    state={\r\n        savefiles:{},\r\n        result:null,\r\n        flag:false,\r\n        isShare:false,\r\n        id:null,\r\n        uid:null,\r\n        owner:null,\r\n        pagelist:null,\r\n        currentPage : 1,\r\n        numberPerPage :9,\r\n        numberOfPages : 1\r\n    };\r\n    componentWillMount(){\r\n        this.handleauth();\r\n    }\r\n    componentDidMount(){\r\n        window.addEventListener(\"beforeunload\",this.onrefresh);\r\n        console.log(\"mounted!!!\");\r\n        const res= localStorage.getItem(\"CodeBix\");\r\n        localStorage.setItem(\"CodeBix\",res);\r\n    }\r\n    componentWillUnmount(){\r\n        console.log(\"unmounted!!!\");\r\n        if(this.ref){\r\n            base.removeBinding(this.ref);\r\n        }\r\n    }\r\n    handlerefresh=()=>{\r\n        this.handleauth();\r\n    }\r\n    handleauth=()=>{\r\n        firebase.auth().onAuthStateChanged(user=>{\r\n            if(user){  \r\n                this.authHandler({user});\r\n            }\r\n        });\r\n    }\r\n    authHandler= async (authdata)=>{\r\n        // look up a store ito the firebase.\r\n        const store = await base.fetch(authdata.user.uid,{context:this});\r\n        //claim if there is no owner.\r\n        if(!store.user){\r\n            await base.post(`${authdata.user.uid}/user`,{\r\n                data:authdata.user.uid\r\n            });\r\n        }\r\n        //set the state of the inventory compnent.\r\n        this.setState({\r\n            uid:authdata.user.uid,\r\n            owner:store.user || authdata.user.uid\r\n        });\r\n            this.ref= base.syncState(`${authdata.user.uid}/savefiles`,{\r\n                context:this,\r\n                state:'savefiles'\r\n            });\r\n   \r\n\r\n    }\r\n\r\n    setshare=()=>{\r\n        this.setState({isShare:!this.state.isShare});\r\n    }\r\n\r\n    handlechange=(event)=>{\r\n        if(!this.state.flag){\r\n            this.setState({flag:true});\r\n        }\r\n        this.setState({pagelist:null});\r\n        const result={};\r\n        const val = event.currentTarget.value;\r\n        if(val===\"Choose language\"){\r\n            this.setState({flag:false});\r\n        }\r\n        setTimeout(() => {\r\n            Object.keys(this.state.savefiles).map((key)=>{\r\n                if(this.state.savefiles[key].mode===val){\r\n                    result[key]=this.state.savefiles[key];\r\n                }\r\n            });    \r\n            this.setState({result:result});\r\n            this.getNumberOfPages(result);\r\n        },2000);\r\n        setTimeout(() => {\r\n            this.loadList();\r\n        }, 3300);\r\n        \r\n    }\r\n    handledelete=(ind)=>{\r\n        let savefiles = {...this.state.savefiles};\r\n        let result = {...this.state.result};\r\n        console.table(savefiles);\r\n        savefiles[ind]=null;\r\n        console.table(savefiles);\r\n        this.setState({savefiles:savefiles});\r\n        result[ind]=null;\r\n        this.setState({result});\r\n\r\n        console.table(this.state.savefiles);  \r\n    }\r\n    editfile=(val)=>{\r\n        const win=window.open(`/files/${btoa(this.state.uid)}/${val}`,'_blank');\r\n        if(win){\r\n            win.focus();\r\n        }\r\n        base.removeBinding(this.ref);\r\n\r\n    }\r\n    setid=(val)=>{\r\n        this.setState({id:val});\r\n    }\r\n\r\n    getNumberOfPages=(result)=>{\r\n        this.setState({numberOfPages:Math.ceil(Object.keys(result).length / this.state.numberPerPage)})\r\n    }\r\n    nextPage=()=>{\r\n        this.setState({currentPage:this.state.currentPage+1});\r\n        setTimeout(() => {\r\n            this.loadList();\r\n        }, 1000);\r\n    }\r\n    previousPage=()=> {\r\n        this.setState({currentPage:this.state.currentPage-1});\r\n        setTimeout(() => {\r\n            this.loadList();\r\n        }, 1000);\r\n    }\r\n    firstPage() {\r\n        this.setState({currentPage:1});\r\n        setTimeout(() => {\r\n            this.loadList();\r\n        }, 1000);\r\n    }\r\n    lastPage=()=> {\r\n        this.setState({currentPage:this.state.numberOfPages});\r\n        setTimeout(() => {\r\n            this.loadList();\r\n        }, 1000);\r\n        \r\n    }\r\n    loadList=()=> {\r\n        this.setState({pagelist:null});\r\n        var begin = ((this.state.currentPage - 1) * this.state.numberPerPage);\r\n        var end = begin + this.state.numberPerPage;\r\n        const res={};\r\n        var arr=Object.keys(this.state.result);\r\n        for(var i=begin;i<end;i++){\r\n            if(i>-1 && i<arr.length){\r\n                var ind=arr[i];\r\n                res[ind]=this.state.result[ind];\r\n            }\r\n        }\r\n        this.setState({pagelist:res});\r\n        \r\n    }\r\n    render(){\r\n        return(\r\n            <div className=\"container-fluid\" style={{padding:\"0px\"}}>\r\n                <div className=\"wrapper-box\">\r\n                    <nav style={{textAlign:\"center\",padding:\"14px\",background:\"whitesmoke\"}}>\r\n                        <div className=\"container\">\r\n                            <h5>\r\n                                <Link style={{textDecoration:\"none\"}} to=\"/\">\r\n                                    <i className=\"fas fa-code\"  style={{color:\"black\"}} ></i>\r\n                                    <span style={{color:\"gray\",paddingLeft:\"3px\",fontWeight:\"200\"}}>CodeBix</span>\r\n                                </Link>\r\n                            </h5>\r\n                        </div>\r\n                        \r\n                    </nav>\r\n                    <Share isShare={this.state.isShare} setshare={this.setshare} path={this.props.match.url} id={this.state.id} uid={this.state.uid} />\r\n                    <div className=\"container\">\r\n                        <br></br>\r\n                        <div className=\"back-div\">\r\n                            <Row>\r\n                                <Col lg=\"5\" md=\"6\" sm=\"9\" xs=\"9\" >\r\n                                    <select onChange={this.handlechange}  style={{display:\"block\",border:\"block\",width:\"100%\",height:\"35px\",borderColor:\"black\",borderWidth:\"2px\"}}>\r\n                                        <option selected value=\"Choose language\">Choose language</option>\r\n                                        \r\n                                        <option value=\"C++\">C++</option>\r\n                                        <option value=\"C\">C</option>\r\n                                    </select>\r\n                                    \r\n                                </Col>\r\n                            </Row>\r\n                        </div>\r\n                        <br></br>\r\n                        <Container style={{border:\"1px solid lightgray\",paddingBottom:\"20px\",marginTop:\"10px\",minHeight:\"450px\",maxHeight:\"450px\",overflow:\"scroll\"}}>\r\n                            <Filecontainer uid={this.state.uid} result={this.state.pagelist} flag={this.state.flag} handledelete={this.handledelete} editfile={this.editfile} setid={this.setid} setshare={this.setshare}/>\r\n                        </Container>\r\n                        <Row>\r\n                            <Col lg=\"4\" md=\"3\" sm=\"2\" xs=\"1\"></Col>\r\n                            <Col lg=\"4\" md=\"6\" sm=\"8\" xs=\"10\">\r\n                                <div className=\"pagination\">\r\n                                    <Button id=\"previous\" ref={this.preRef} onClick={()=>this.previousPage()} disabled={this.state.currentPage === 1 ? true : false}>Prev</Button>\r\n                                    <Button id=\"first\" ref={this.firstRef} onClick={()=>this.firstPage()} disabled={this.state.currentPage === 1 ? true : false}>First</Button>\r\n                                    <Button id=\"next\" ref={this.nextRef} onClick={()=>this.nextPage()} disabled={this.state.currentPage === this.state.numberOfPages ? true : false}>Next</Button>\r\n                                    <Button id=\"last\" ref={this.lastRef} onClick={()=>this.lastPage()} disabled={ this.state.currentPage === this.state.numberOfPages ? true : false}>Last</Button>\r\n                                </div>\r\n                            </Col>\r\n                            <Col lg=\"4\" md=\"3\" sm=\"2\" xs=\"1\"></Col>\r\n                            \r\n                        </Row>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\nexport default Files;"]},"metadata":{},"sourceType":"module"}