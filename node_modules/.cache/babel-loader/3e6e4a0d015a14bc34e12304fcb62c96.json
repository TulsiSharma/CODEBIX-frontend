{"ast":null,"code":"var _jsxFileName = \"E:\\\\Internship Project\\\\codebix\\\\src\\\\components\\\\Files.js\";\nimport React from \"react\";\nimport { Row, Col, Container } from \"reactstrap\";\nimport Filecontainer from \"./Filecontainer\";\nimport { Link } from \"react-router-dom/cjs/react-router-dom.min\";\nimport Share from \"./Share\";\nimport base, { firebaseApp } from \"./base\";\nimport firebase, { auth } from \"firebase\";\n\nclass Files extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      savefiles: {},\n      result: null,\n      flag: false,\n      isShare: false,\n      id: null,\n      uid: null,\n      owner: null\n    };\n\n    this.authHandler = async authdata => {\n      // look up a store ito the firebase.\n      const store = await base.fetch(authdata.user.uid, {\n        context: this\n      }); //claim if there is no owner.\n\n      if (!store.user) {\n        await base.post(`${authdata.user.uid}/user`, {\n          data: authdata.user.uid\n        });\n      } //set the state of the inventory compnent.\n\n\n      this.setState({\n        uid: authdata.user.uid,\n        owner: store.user || authdata.user.uid\n      });\n      this.ref = base.syncState(`${authdata.user.uid}/savefiles`, {\n        context: this,\n        state: 'savefiles'\n      });\n    };\n\n    this.setshare = () => {\n      this.setState({\n        isShare: !this.state.isShare\n      });\n    };\n\n    this.handlechange = event => {\n      if (!this.state.flag) {\n        this.setState({\n          flag: true\n        });\n      }\n\n      this.setState({\n        result: null\n      });\n      const result = {};\n      const val = event.currentTarget.value;\n\n      if (val === \"Choose language\") {\n        this.setState({\n          flag: false\n        });\n      }\n\n      setTimeout(() => {\n        Object.keys(this.state.savefiles).map(key => {\n          if (this.state.savefiles[key].mode === val) {\n            result[key] = this.state.savefiles[key];\n          }\n        });\n        console.log(this.state.result);\n        console.log(result);\n        this.setState({\n          result: result\n        });\n      }, 3300);\n    };\n\n    this.handledelete = ind => {\n      let savefiles = { ...this.state.savefiles\n      };\n      let result = { ...this.state.result\n      };\n      console.table(savefiles);\n      console.log(\"######################################\");\n      savefiles[ind] = null;\n      console.table(savefiles);\n      this.setState({\n        savefiles: savefiles\n      });\n      result[ind] = null;\n      this.setState({\n        result\n      });\n      console.log(\"######################################\");\n      console.table(this.state.savefiles);\n    };\n\n    this.editfile = val => {\n      const win = window.open(`/files/${val}`, '_blank');\n\n      if (win) {\n        win.focus();\n      }\n\n      base.removeBinding(this.ref);\n    };\n\n    this.setid = val => {\n      this.setState({\n        id: val\n      });\n    };\n\n    this.paginator = (items, page, per_page) => {\n      var page = page || 1,\n          per_page = per_page || 10,\n          offset = (page - 1) * per_page,\n          paginatedItems = items.slice(offset).slice(0, per_page),\n          total_pages = Math.ceil(items.length / per_page);\n      return {\n        page: page,\n        per_page: per_page,\n        pre_page: page - 1 ? page - 1 : null,\n        next_page: total_pages > page ? page + 1 : null,\n        total: items.length,\n        total_pages: total_pages,\n        data: paginatedItems\n      };\n    };\n  }\n\n  componentWillMount() {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        this.authHandler({\n          user\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.ref = base.syncState(\"//savefiles\", {\n      context: this,\n      state: 'savefiles'\n    });\n  }\n\n  componentWillUnmount() {\n    base.removeBinding(this.ref);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      style: {\n        padding: \"0px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrapper-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      style: {\n        textAlign: \"center\",\n        padding: \"14px\",\n        background: \"whitesmoke\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      style: {\n        textDecoration: \"none\"\n      },\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-code\",\n      style: {\n        color: \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: \"gray\",\n        paddingLeft: \"3px\",\n        fontWeight: \"200\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 37\n      }\n    }, \"CodeBix\"))))), /*#__PURE__*/React.createElement(Share, {\n      isShare: this.state.isShare,\n      setshare: this.setshare,\n      path: this.props.match.url,\n      id: this.state.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"back-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      lg: \"5\",\n      md: \"6\",\n      sm: \"9\",\n      xs: \"9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      onChange: this.handlechange,\n      style: {\n        display: \"block\",\n        border: \"block\",\n        width: \"100%\",\n        height: \"35px\",\n        borderColor: \"black\",\n        borderWidth: \"2px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      value: \"Choose language\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 41\n      }\n    }, \"Choose language\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"C++\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 41\n      }\n    }, \"C++\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"C\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 41\n      }\n    }, \"C\"))))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Container, {\n      style: {\n        border: \"1px solid lightgray\",\n        paddingBottom: \"20px\",\n        marginTop: \"10px\",\n        minHeight: \"450px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Filecontainer, {\n      result: this.state.result,\n      flag: this.state.flag,\n      handledelete: this.handledelete,\n      editfile: this.editfile,\n      setid: this.setid,\n      setshare: this.setshare,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      lg: \"12\",\n      md: \"12\",\n      sm: \"12\",\n      xs: \"12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 29\n      }\n    })))));\n  }\n\n}\n\nexport default Files;","map":{"version":3,"sources":["E:/Internship Project/codebix/src/components/Files.js"],"names":["React","Row","Col","Container","Filecontainer","Link","Share","base","firebaseApp","firebase","auth","Files","Component","state","savefiles","result","flag","isShare","id","uid","owner","authHandler","authdata","store","fetch","user","context","post","data","setState","ref","syncState","setshare","handlechange","event","val","currentTarget","value","setTimeout","Object","keys","map","key","mode","console","log","handledelete","ind","table","editfile","win","window","open","focus","removeBinding","setid","paginator","items","page","per_page","offset","paginatedItems","slice","total_pages","Math","ceil","length","pre_page","next_page","total","componentWillMount","onAuthStateChanged","componentDidMount","componentWillUnmount","render","padding","textAlign","background","textDecoration","color","paddingLeft","fontWeight","props","match","url","display","border","width","height","borderColor","borderWidth","paddingBottom","marginTop","minHeight"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Row, Col,Container} from \"reactstrap\";\r\nimport Filecontainer from \"./Filecontainer\";\r\nimport { Link } from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport Share from \"./Share\";\r\nimport base, {firebaseApp} from \"./base\";\r\nimport firebase ,{auth} from \"firebase\";\r\nclass Files extends React.Component{\r\n    state={\r\n        savefiles:{},\r\n        result:null,\r\n        flag:false,\r\n        isShare:false,\r\n        id:null,\r\n        uid:null,\r\n        owner:null\r\n    };\r\n    componentWillMount(){\r\n        firebase.auth().onAuthStateChanged(user=>{\r\n            if(user){  \r\n                this.authHandler({user});\r\n            }\r\n        })\r\n      \r\n    }\r\n    componentDidMount(){\r\n      this.ref= base.syncState(\"//savefiles\",{\r\n        context:this,\r\n        state: 'savefiles'\r\n      }\r\n      );\r\n    }\r\n    componentWillUnmount(){\r\n        base.removeBinding(this.ref);\r\n    }\r\n    authHandler= async (authdata)=>{\r\n        // look up a store ito the firebase.\r\n        const store = await base.fetch(authdata.user.uid,{context:this});\r\n        //claim if there is no owner.\r\n        if(!store.user){\r\n            await base.post(`${authdata.user.uid}/user`,{\r\n                data:authdata.user.uid\r\n            });\r\n        }\r\n        //set the state of the inventory compnent.\r\n        this.setState({\r\n            uid:authdata.user.uid,\r\n            owner:store.user || authdata.user.uid\r\n        });\r\n            this.ref= base.syncState(`${authdata.user.uid}/savefiles`,{\r\n                context:this,\r\n                state:'savefiles'\r\n            });\r\n   \r\n\r\n    }\r\n\r\n    setshare=()=>{\r\n        this.setState({isShare:!this.state.isShare});\r\n    }\r\n\r\n    handlechange=(event)=>{\r\n        if(!this.state.flag){\r\n            this.setState({flag:true});\r\n        }\r\n        this.setState({result:null});\r\n        const result={};\r\n        const val = event.currentTarget.value;\r\n        if(val===\"Choose language\"){\r\n            this.setState({flag:false});\r\n        }\r\n        setTimeout(() => {\r\n            Object.keys(this.state.savefiles).map((key)=>{\r\n                if(this.state.savefiles[key].mode===val){\r\n                    result[key]=this.state.savefiles[key];\r\n                }\r\n            });\r\n            console.log(this.state.result); \r\n            console.log(result);    \r\n            this.setState({result:result});\r\n        },3300);\r\n        \r\n    }\r\n    handledelete=(ind)=>{\r\n        let savefiles = {...this.state.savefiles};\r\n        let result = {...this.state.result};\r\n        console.table(savefiles);\r\n        console.log(\"######################################\");\r\n        savefiles[ind]=null;\r\n        console.table(savefiles);\r\n        this.setState({savefiles:savefiles});\r\n        result[ind]=null;\r\n        this.setState({result});\r\n        console.log(\"######################################\");\r\n\r\n        console.table(this.state.savefiles);  \r\n    }\r\n    editfile=(val)=>{\r\n        const win=window.open(`/files/${val}`,'_blank');\r\n        if(win){\r\n            win.focus();\r\n        }\r\n        base.removeBinding(this.ref);\r\n\r\n    }\r\n    setid=(val)=>{\r\n        this.setState({id:val});\r\n    }\r\n    paginator=(items, page, per_page)=>{\r\n        var page = page || 1,\r\n        per_page = per_page || 10,\r\n        offset = (page - 1) * per_page,\r\n        paginatedItems = items.slice(offset).slice(0, per_page),\r\n        total_pages = Math.ceil(items.length / per_page);\r\n        return {\r\n        page: page,\r\n        per_page: per_page,\r\n        pre_page: page - 1 ? page - 1 : null,\r\n        next_page: (total_pages > page) ? page + 1 : null,\r\n        total: items.length,\r\n        total_pages: total_pages,\r\n        data: paginatedItems\r\n  };\r\n    }\r\n    render(){\r\n        return(\r\n            <div className=\"container-fluid\" style={{padding:\"0px\"}}>\r\n                <div className=\"wrapper-box\">\r\n                    <nav style={{textAlign:\"center\",padding:\"14px\",background:\"whitesmoke\"}}>\r\n                        <div className=\"container\">\r\n                            <h5>\r\n                                <Link style={{textDecoration:\"none\"}} to=\"/\">\r\n                                    <i className=\"fas fa-code\"  style={{color:\"black\"}} ></i>\r\n                                    <span style={{color:\"gray\",paddingLeft:\"3px\",fontWeight:\"200\"}}>CodeBix</span>\r\n                                </Link>\r\n\r\n                            </h5>\r\n                            \r\n                        </div>\r\n                        \r\n                    </nav>\r\n                    <Share isShare={this.state.isShare} setshare={this.setshare} path={this.props.match.url} id={this.state.id} />\r\n                    <div className=\"container\">\r\n                        <br></br>\r\n                        <div className=\"back-div\">\r\n                            <Row>\r\n                                <Col lg=\"5\" md=\"6\" sm=\"9\" xs=\"9\" >\r\n                                    <select onChange={this.handlechange}  style={{display:\"block\",border:\"block\",width:\"100%\",height:\"35px\",borderColor:\"black\",borderWidth:\"2px\"}}>\r\n                                        <option selected value=\"Choose language\">Choose language</option>\r\n                                        \r\n                                        <option value=\"C++\">C++</option>\r\n                                        <option value=\"C\">C</option>\r\n                                    </select>\r\n                                    \r\n                                </Col>\r\n                            </Row>\r\n                        </div>\r\n                        <br></br>\r\n                        <Container style={{border:\"1px solid lightgray\",paddingBottom:\"20px\",marginTop:\"10px\",minHeight:\"450px\"}}>\r\n                            <Filecontainer result={this.state.result} flag={this.state.flag} handledelete={this.handledelete} editfile={this.editfile} setid={this.setid} setshare={this.setshare}/>\r\n                        </Container>\r\n                        <Row>\r\n                            <Col lg=\"12\" md=\"12\" sm=\"12\" xs=\"12\">\r\n\r\n                            </Col>\r\n                        </Row>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\nexport default Files;"]},"metadata":{},"sourceType":"module"}