{"ast":null,"code":"import _objectSpread from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\Internship Project\\\\codebix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{Row,Col,Container,Button}from\"reactstrap\";import Filecontainer from\"./Filecontainer\";import{Link}from\"react-router-dom/cjs/react-router-dom.min\";import Share from\"./Share\";import base from\"./base\";import firebase from\"firebase\";var Files=/*#__PURE__*/function(_React$Component){_inherits(Files,_React$Component);var _super=_createSuper(Files);function Files(){var _this;_classCallCheck(this,Files);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.preRef=React.createRef();_this.nextRef=React.createRef();_this.firstRef=React.createRef();_this.lastRef=React.createRef();_this.state={savefiles:{},result:null,flag:false,isShare:false,id:null,uid:null,owner:null,pagelist:null,currentPage:1,numberPerPage:9,numberOfPages:1};_this.authHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(authdata){var store;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return base.fetch(authdata.user.uid,{context:_assertThisInitialized(_this)});case 2:store=_context.sent;if(store.user){_context.next=6;break;}_context.next=6;return base.post(\"\".concat(authdata.user.uid,\"/user\"),{data:authdata.user.uid});case 6://set the state of the inventory compnent.\n_this.setState({uid:authdata.user.uid,owner:store.user||authdata.user.uid});_this.ref=base.syncState(\"\".concat(authdata.user.uid,\"/savefiles\"),{context:_assertThisInitialized(_this),state:'savefiles'});case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.setshare=function(){_this.setState({isShare:!_this.state.isShare});};_this.handlechange=function(event){if(!_this.state.flag){_this.setState({flag:true});}_this.setState({pagelist:null});var result={};var val=event.currentTarget.value;if(val===\"Choose language\"){_this.setState({flag:false});}setTimeout(function(){Object.keys(_this.state.savefiles).map(function(key){if(_this.state.savefiles[key].mode===val){result[key]=_this.state.savefiles[key];}});_this.setState({result:result});_this.getNumberOfPages(result);},2000);setTimeout(function(){_this.loadList();},3300);};_this.handledelete=function(ind){var savefiles=_objectSpread({},_this.state.savefiles);var result=_objectSpread({},_this.state.result);console.table(savefiles);savefiles[ind]=null;console.table(savefiles);_this.setState({savefiles:savefiles});result[ind]=null;_this.setState({result:result});console.table(_this.state.savefiles);};_this.editfile=function(val){var win=window.open(\"/files/\".concat(btoa(_this.state.uid),\"/\").concat(val),'_blank');if(win){win.focus();}base.removeBinding(_this.ref);};_this.setid=function(val){_this.setState({id:val});};_this.getNumberOfPages=function(result){_this.setState({numberOfPages:Math.ceil(Object.keys(result).length/_this.state.numberPerPage)});};_this.nextPage=function(){_this.setState({currentPage:_this.state.currentPage+1});setTimeout(function(){_this.loadList();},1000);};_this.previousPage=function(){_this.setState({currentPage:_this.state.currentPage-1});setTimeout(function(){_this.loadList();},1000);};_this.lastPage=function(){_this.setState({currentPage:_this.state.numberOfPages});setTimeout(function(){_this.loadList();},1000);};_this.loadList=function(){_this.setState({pagelist:null});var begin=(_this.state.currentPage-1)*_this.state.numberPerPage;var end=begin+_this.state.numberPerPage;var res={};var arr=Object.keys(_this.state.result);for(var i=begin;i<end;i++){if(i>-1&&i<arr.length){var ind=arr[i];res[ind]=_this.state.result[ind];}}_this.setState({pagelist:res});};return _this;}_createClass(Files,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;firebase.auth().onAuthStateChanged(function(user){if(user){_this2.authHandler({user:user});}});}},{key:\"componentDidMount\",value:function componentDidMount(){var res=localStorage.getItem(\"CodeBix\");localStorage.setItem(\"CodeBix\",res);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(this.ref){base.removeBinding(this.ref);}}},{key:\"firstPage\",value:function firstPage(){var _this3=this;this.setState({currentPage:1});setTimeout(function(){_this3.loadList();},1000);}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\",style:{padding:\"0px\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"wrapper-box\"},/*#__PURE__*/React.createElement(\"nav\",{style:{textAlign:\"center\",padding:\"14px\",background:\"whitesmoke\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h5\",null,/*#__PURE__*/React.createElement(Link,{style:{textDecoration:\"none\"},to:\"/\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-code\",style:{color:\"black\"}}),/*#__PURE__*/React.createElement(\"span\",{style:{color:\"gray\",paddingLeft:\"3px\",fontWeight:\"200\"}},\"CodeBix\"))))),/*#__PURE__*/React.createElement(Share,{isShare:this.state.isShare,setshare:this.setshare,path:this.props.match.url,id:this.state.id,uid:this.state.uid}),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"back-div\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"5\",md:\"6\",sm:\"9\",xs:\"9\"},/*#__PURE__*/React.createElement(\"select\",{onChange:this.handlechange,style:{display:\"block\",border:\"block\",width:\"100%\",height:\"35px\",borderColor:\"black\",borderWidth:\"2px\"}},/*#__PURE__*/React.createElement(\"option\",{selected:true,value:\"Choose language\"},\"Choose language\"),/*#__PURE__*/React.createElement(\"option\",{value:\"C++\"},\"C++\"),/*#__PURE__*/React.createElement(\"option\",{value:\"C\"},\"C\"))))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Container,{style:{border:\"1px solid lightgray\",paddingBottom:\"20px\",marginTop:\"10px\",minHeight:\"450px\",maxHeight:\"450px\",overflow:\"scroll\"}},/*#__PURE__*/React.createElement(Filecontainer,{result:this.state.pagelist,flag:this.state.flag,handledelete:this.handledelete,editfile:this.editfile,setid:this.setid,setshare:this.setshare})),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"4\",md:\"3\",sm:\"2\",xs:\"1\"}),/*#__PURE__*/React.createElement(Col,{lg:\"4\",md:\"6\",sm:\"8\",xs:\"10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"pagination\"},/*#__PURE__*/React.createElement(Button,{id:\"previous\",ref:this.preRef,onClick:function onClick(){return _this4.previousPage();},disabled:this.state.currentPage===1?true:false},\"Prev\"),/*#__PURE__*/React.createElement(Button,{id:\"first\",ref:this.firstRef,onClick:function onClick(){return _this4.firstPage();},disabled:this.state.currentPage===1?true:false},\"First\"),/*#__PURE__*/React.createElement(Button,{id:\"next\",ref:this.nextRef,onClick:function onClick(){return _this4.nextPage();},disabled:this.state.currentPage===this.state.numberOfPages?true:false},\"Next\"),/*#__PURE__*/React.createElement(Button,{id:\"last\",ref:this.lastRef,onClick:function onClick(){return _this4.lastPage();},disabled:this.state.currentPage===this.state.numberOfPages?true:false},\"Last\"))),/*#__PURE__*/React.createElement(Col,{lg:\"4\",md:\"3\",sm:\"2\",xs:\"1\"})))));}}]);return Files;}(React.Component);export default Files;","map":{"version":3,"sources":["E:/Internship Project/codebix/src/components/Files.js"],"names":["React","Row","Col","Container","Button","Filecontainer","Link","Share","base","firebase","Files","preRef","createRef","nextRef","firstRef","lastRef","state","savefiles","result","flag","isShare","id","uid","owner","pagelist","currentPage","numberPerPage","numberOfPages","authHandler","authdata","fetch","user","context","store","post","data","setState","ref","syncState","setshare","handlechange","event","val","currentTarget","value","setTimeout","Object","keys","map","key","mode","getNumberOfPages","loadList","handledelete","ind","console","table","editfile","win","window","open","btoa","focus","removeBinding","setid","Math","ceil","length","nextPage","previousPage","lastPage","begin","end","res","arr","i","auth","onAuthStateChanged","localStorage","getItem","setItem","padding","textAlign","background","textDecoration","color","paddingLeft","fontWeight","props","match","url","display","border","width","height","borderColor","borderWidth","paddingBottom","marginTop","minHeight","maxHeight","overflow","firstPage","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Row, Col,Container, Button} from \"reactstrap\";\r\nimport Filecontainer from \"./Filecontainer\";\r\nimport { Link } from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport Share from \"./Share\";\r\nimport base from \"./base\";\r\nimport firebase from \"firebase\";\r\nclass Files extends React.Component{\r\n    preRef=React.createRef();\r\n    nextRef=React.createRef();\r\n    firstRef=React.createRef();\r\n    lastRef=React.createRef();\r\n    state={\r\n        savefiles:{},\r\n        result:null,\r\n        flag:false,\r\n        isShare:false,\r\n        id:null,\r\n        uid:null,\r\n        owner:null,\r\n        pagelist:null,\r\n        currentPage : 1,\r\n        numberPerPage :9,\r\n        numberOfPages : 1\r\n    };\r\n    componentWillMount(){\r\n        firebase.auth().onAuthStateChanged(user=>{\r\n            if(user){  \r\n                this.authHandler({user});\r\n            }\r\n        })\r\n      \r\n    }\r\n    componentDidMount(){\r\n        const res= localStorage.getItem(\"CodeBix\");\r\n        localStorage.setItem(\"CodeBix\",res);\r\n    }\r\n    componentWillUnmount(){\r\n        if(this.ref){\r\n            base.removeBinding(this.ref);\r\n        }\r\n    }\r\n    authHandler= async (authdata)=>{\r\n        // look up a store ito the firebase.\r\n        const store = await base.fetch(authdata.user.uid,{context:this});\r\n        //claim if there is no owner.\r\n        if(!store.user){\r\n            await base.post(`${authdata.user.uid}/user`,{\r\n                data:authdata.user.uid\r\n            });\r\n        }\r\n        //set the state of the inventory compnent.\r\n        this.setState({\r\n            uid:authdata.user.uid,\r\n            owner:store.user || authdata.user.uid\r\n        });\r\n            this.ref= base.syncState(`${authdata.user.uid}/savefiles`,{\r\n                context:this,\r\n                state:'savefiles'\r\n            });\r\n   \r\n\r\n    }\r\n\r\n    setshare=()=>{\r\n        this.setState({isShare:!this.state.isShare});\r\n    }\r\n\r\n    handlechange=(event)=>{\r\n        if(!this.state.flag){\r\n            this.setState({flag:true});\r\n        }\r\n        this.setState({pagelist:null});\r\n        const result={};\r\n        const val = event.currentTarget.value;\r\n        if(val===\"Choose language\"){\r\n            this.setState({flag:false});\r\n        }\r\n        setTimeout(() => {\r\n            Object.keys(this.state.savefiles).map((key)=>{\r\n                if(this.state.savefiles[key].mode===val){\r\n                    result[key]=this.state.savefiles[key];\r\n                }\r\n            });    \r\n            this.setState({result:result});\r\n            this.getNumberOfPages(result);\r\n        },2000);\r\n        setTimeout(() => {\r\n            this.loadList();\r\n        }, 3300);\r\n        \r\n    }\r\n    handledelete=(ind)=>{\r\n        let savefiles = {...this.state.savefiles};\r\n        let result = {...this.state.result};\r\n        console.table(savefiles);\r\n        savefiles[ind]=null;\r\n        console.table(savefiles);\r\n        this.setState({savefiles:savefiles});\r\n        result[ind]=null;\r\n        this.setState({result});\r\n\r\n        console.table(this.state.savefiles);  \r\n    }\r\n    editfile=(val)=>{\r\n        const win=window.open(`/files/${btoa(this.state.uid)}/${val}`,'_blank');\r\n        if(win){\r\n            win.focus();\r\n        }\r\n        base.removeBinding(this.ref);\r\n\r\n    }\r\n    setid=(val)=>{\r\n        this.setState({id:val});\r\n    }\r\n\r\n    getNumberOfPages=(result)=>{\r\n        this.setState({numberOfPages:Math.ceil(Object.keys(result).length / this.state.numberPerPage)})\r\n    }\r\n    nextPage=()=>{\r\n        this.setState({currentPage:this.state.currentPage+1});\r\n        setTimeout(() => {\r\n            this.loadList();\r\n        }, 1000);\r\n    }\r\n    previousPage=()=> {\r\n        this.setState({currentPage:this.state.currentPage-1});\r\n        setTimeout(() => {\r\n            this.loadList();\r\n        }, 1000);\r\n    }\r\n    firstPage() {\r\n        this.setState({currentPage:1});\r\n        setTimeout(() => {\r\n            this.loadList();\r\n        }, 1000);\r\n    }\r\n    lastPage=()=> {\r\n        this.setState({currentPage:this.state.numberOfPages});\r\n        setTimeout(() => {\r\n            this.loadList();\r\n        }, 1000);\r\n        \r\n    }\r\n    loadList=()=> {\r\n        this.setState({pagelist:null});\r\n        var begin = ((this.state.currentPage - 1) * this.state.numberPerPage);\r\n        var end = begin + this.state.numberPerPage;\r\n        const res={};\r\n        var arr=Object.keys(this.state.result);\r\n        for(var i=begin;i<end;i++){\r\n            if(i>-1 && i<arr.length){\r\n                var ind=arr[i];\r\n                res[ind]=this.state.result[ind];\r\n            }\r\n        }\r\n        this.setState({pagelist:res});\r\n        \r\n    }\r\n    render(){\r\n        return(\r\n            <div className=\"container-fluid\" style={{padding:\"0px\"}}>\r\n                <div className=\"wrapper-box\">\r\n                    <nav style={{textAlign:\"center\",padding:\"14px\",background:\"whitesmoke\"}}>\r\n                        <div className=\"container\">\r\n                            <h5>\r\n                                <Link style={{textDecoration:\"none\"}} to=\"/\">\r\n                                    <i className=\"fas fa-code\"  style={{color:\"black\"}} ></i>\r\n                                    <span style={{color:\"gray\",paddingLeft:\"3px\",fontWeight:\"200\"}}>CodeBix</span>\r\n                                </Link>\r\n                            </h5>\r\n                        </div>\r\n                        \r\n                    </nav>\r\n                    <Share isShare={this.state.isShare} setshare={this.setshare} path={this.props.match.url} id={this.state.id} uid={this.state.uid} />\r\n                    <div className=\"container\">\r\n                        <br></br>\r\n                        <div className=\"back-div\">\r\n                            <Row>\r\n                                <Col lg=\"5\" md=\"6\" sm=\"9\" xs=\"9\" >\r\n                                    <select onChange={this.handlechange}  style={{display:\"block\",border:\"block\",width:\"100%\",height:\"35px\",borderColor:\"black\",borderWidth:\"2px\"}}>\r\n                                        <option selected value=\"Choose language\">Choose language</option>\r\n                                        \r\n                                        <option value=\"C++\">C++</option>\r\n                                        <option value=\"C\">C</option>\r\n                                    </select>\r\n                                    \r\n                                </Col>\r\n                            </Row>\r\n                        </div>\r\n                        <br></br>\r\n                        <Container style={{border:\"1px solid lightgray\",paddingBottom:\"20px\",marginTop:\"10px\",minHeight:\"450px\",maxHeight:\"450px\",overflow:\"scroll\"}}>\r\n                            <Filecontainer result={this.state.pagelist} flag={this.state.flag} handledelete={this.handledelete} editfile={this.editfile} setid={this.setid} setshare={this.setshare}/>\r\n                        </Container>\r\n                        <Row>\r\n                            <Col lg=\"4\" md=\"3\" sm=\"2\" xs=\"1\"></Col>\r\n                            <Col lg=\"4\" md=\"6\" sm=\"8\" xs=\"10\">\r\n                                <div className=\"pagination\">\r\n                                    <Button id=\"previous\" ref={this.preRef} onClick={()=>this.previousPage()} disabled={this.state.currentPage === 1 ? true : false}>Prev</Button>\r\n                                    <Button id=\"first\" ref={this.firstRef} onClick={()=>this.firstPage()} disabled={this.state.currentPage === 1 ? true : false}>First</Button>\r\n                                    <Button id=\"next\" ref={this.nextRef} onClick={()=>this.nextPage()} disabled={this.state.currentPage === this.state.numberOfPages ? true : false}>Next</Button>\r\n                                    <Button id=\"last\" ref={this.lastRef} onClick={()=>this.lastPage()} disabled={ this.state.currentPage === this.state.numberOfPages ? true : false}>Last</Button>\r\n                                </div>\r\n                            </Col>\r\n                            <Col lg=\"4\" md=\"3\" sm=\"2\" xs=\"1\"></Col>\r\n                            \r\n                        </Row>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\nexport default Files;"]},"metadata":{},"sourceType":"module"}